
> shipwright-demo-api@1.0.0 test
> jest --coverage --forceExit

PASS tests/app.test.js
  GET /health
    ✓ should return 200 with status ok (11 ms)
  GET /users
    ✓ should return 401 when no auth header is provided (3 ms)
    ✓ should return 401 for malformed auth header (1 ms)
    ✓ should return users when authenticated (1 ms)
  GET /users/:id
    ✓ should return a single user by id (1 ms)
    ✓ should return 404 for non-existent user (1 ms)
  POST /users
    ✓ should create a new user with valid data (6 ms)
    ✓ should reject user with missing name (1 ms)
    ✓ should reject user with invalid email (1 ms)
  404 handler
    ✓ should return 404 for unknown routes (1 ms)

PASS tests/validators.test.js
  validateUser
    ✓ should accept valid user data (1 ms)
    ✓ should reject missing name
    ✓ should reject missing email
    ✓ should reject name shorter than 2 characters
    ✓ should reject invalid email format (1 ms)
    ✓ should reject empty object
    ✓ should reject unknown fields

---------------|---------|----------|---------|---------|-------------------
File           | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
---------------|---------|----------|---------|---------|-------------------
All files      |   93.75 |       90 |     100 |   93.75 |                   
 middleware.js |   91.66 |       90 |     100 |   91.66 | 25                
 validators.js |     100 |      100 |     100 |     100 |                   
---------------|---------|----------|---------|---------|-------------------
Test Suites: 2 passed, 2 total
Tests:       17 passed, 17 total
Snapshots:   0 total
Time:        0.394 s, estimated 1 s
Ran all test suites.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
