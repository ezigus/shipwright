
> shipwright-cli@3.1.0 test
> bash scripts/sw-agi-roadmap-test.sh && bash scripts/sw-activity-test.sh && bash scripts/sw-adaptive-test.sh && bash scripts/sw-adversarial-test.sh && bash scripts/sw-architecture-enforcer-test.sh && bash scripts/sw-auth-test.sh && bash scripts/sw-autonomous-test.sh && bash scripts/sw-changelog-test.sh && bash scripts/sw-checkpoint-test.sh && bash scripts/sw-ci-test.sh && bash scripts/sw-cleanup-test.sh && bash scripts/sw-code-review-test.sh && bash scripts/sw-connect-test.sh && bash scripts/sw-context-test.sh && bash scripts/sw-cost-test.sh && bash scripts/sw-daemon-test.sh && bash scripts/sw-dashboard-test.sh && bash scripts/sw-db-test.sh && bash scripts/sw-decompose-test.sh && bash scripts/sw-decide-test.sh && bash scripts/sw-deps-test.sh && bash scripts/sw-developer-simulation-test.sh && bash scripts/sw-discovery-test.sh && bash scripts/sw-doc-fleet-test.sh && bash scripts/sw-docs-agent-test.sh && bash scripts/sw-docs-test.sh && bash scripts/sw-doctor-test.sh && bash scripts/sw-dora-test.sh && bash scripts/sw-durable-test.sh && bash scripts/sw-e2e-orchestrator-test.sh && bash scripts/sw-eventbus-test.sh && bash scripts/sw-feedback-test.sh && bash scripts/sw-fix-test.sh && bash scripts/sw-fleet-discover-test.sh && bash scripts/sw-fleet-test.sh && bash scripts/sw-fleet-viz-test.sh && bash scripts/sw-frontier-test.sh && bash scripts/sw-github-app-test.sh && bash scripts/sw-github-checks-test.sh && bash scripts/sw-github-deploy-test.sh && bash scripts/sw-github-graphql-test.sh && bash scripts/sw-guild-test.sh && bash scripts/sw-heartbeat-test.sh && bash scripts/sw-hygiene-test.sh && bash scripts/sw-incident-test.sh && bash scripts/sw-init-test.sh && bash scripts/sw-instrument-test.sh && bash scripts/sw-intelligence-test.sh && bash scripts/sw-jira-test.sh && bash scripts/sw-launchd-test.sh && bash scripts/sw-linear-test.sh && bash scripts/sw-logs-test.sh && bash scripts/sw-loop-test.sh && bash scripts/sw-memory-test.sh && bash scripts/sw-mission-control-test.sh && bash scripts/sw-model-router-test.sh && bash scripts/sw-otel-test.sh && bash scripts/sw-oversight-test.sh && bash scripts/sw-patrol-meta-test.sh && bash scripts/sw-pipeline-composer-test.sh && bash scripts/sw-pipeline-test.sh && bash scripts/sw-pipeline-vitals-test.sh && bash scripts/sw-pm-test.sh && bash scripts/sw-pr-lifecycle-test.sh && bash scripts/sw-predictive-test.sh && bash scripts/sw-prep-test.sh && bash scripts/sw-ps-test.sh && bash scripts/sw-public-dashboard-test.sh && bash scripts/sw-quality-test.sh && bash scripts/sw-reaper-test.sh && bash scripts/sw-recruit-test.sh && bash scripts/sw-regression-test.sh && bash scripts/sw-release-manager-test.sh && bash scripts/sw-release-test.sh && bash scripts/sw-remote-test.sh && bash scripts/sw-replay-test.sh && bash scripts/sw-retro-test.sh && bash scripts/sw-scale-test.sh && bash scripts/sw-security-audit-test.sh && bash scripts/sw-self-optimize-test.sh && bash scripts/sw-session-test.sh && bash scripts/sw-setup-test.sh && bash scripts/sw-standup-test.sh && bash scripts/sw-status-test.sh && bash scripts/sw-strategic-test.sh && bash scripts/sw-stream-test.sh && bash scripts/sw-swarm-test.sh && bash scripts/sw-team-stages-test.sh && bash scripts/sw-templates-test.sh && bash scripts/sw-testgen-test.sh && bash scripts/sw-tmux-pipeline-test.sh && bash scripts/sw-tmux-test.sh && bash scripts/sw-trace-test.sh && bash scripts/sw-tracker-test.sh && bash scripts/sw-triage-test.sh && bash scripts/sw-upgrade-test.sh && bash scripts/sw-ux-test.sh && bash scripts/sw-webhook-test.sh && bash scripts/sw-widgets-test.sh && bash scripts/sw-worktree-test.sh && bash scripts/sw-lib-compat-test.sh && bash scripts/sw-lib-helpers-test.sh && bash scripts/sw-lib-daemon-dispatch-test.sh && bash scripts/sw-lib-daemon-failure-test.sh && bash scripts/sw-lib-daemon-poll-test.sh && bash scripts/sw-lib-daemon-state-test.sh && bash scripts/sw-lib-daemon-triage-test.sh && bash scripts/sw-lib-pipeline-detection-test.sh && bash scripts/sw-lib-pipeline-intelligence-test.sh && bash scripts/sw-lib-pipeline-quality-checks-test.sh && bash scripts/sw-lib-pipeline-stages-test.sh && bash scripts/sw-lib-pipeline-state-test.sh && bash scripts/sw-adapters-test.sh && bash scripts/sw-evidence-test.sh && bash scripts/sw-review-rerun-test.sh && bash scripts/sw-tracker-providers-test.sh && bash scripts/sw-budget-chaos-test.sh && bash scripts/sw-autonomous-e2e-test.sh && bash scripts/sw-memory-discovery-e2e-test.sh && bash scripts/sw-policy-e2e-test.sh && bash scripts/sw-e2e-smoke-test.sh && bash scripts/sw-dashboard-e2e-test.sh


[38;2;124;58;237m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;124;58;237m[1mâ•‘  AGI-Roadmap Validation â€” Real Tests for Every Feature        â•‘[0m
[38;2;124;58;237m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[38;2;124;58;237m[1mPhase 1: Feedback Loops (Discovery, Memory, PM, Failure Learning)[0m
  [38;2;0;212;255mâ–¸[0m Daemon: failure_history initialized in state JSON... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Daemon: consecutive count uses reduce (run-from-newest, not total)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Daemon: get_max_retries_for_class returns per-class limits... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Daemon: exponential backoff formula 5*2^(n-3) is correct... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Daemon: resume_after parsed in UTC (not local TZ)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m PM: recommend --json flag implemented... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m PM: learn subcommand functional... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Daemon: PM recommend/learn wired into triage + success/failure... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Daemon: confidence < 60% upgrades to full template... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mPhase 2: Agent Coordination (Feedback, Predictive, Oversight, Autonomous)[0m
  [38;2;0;212;255mâ–¸[0m Feedback: ARTIFACTS_DIR respects caller override... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Feedback: rollback uses PIPESTATUS for correct exit code... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Predictive: anomaly detection returns severity for 5x baseline... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Predictive: inject-prevention command exists and runs... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: predictive anomaly/baseline/inject-prevention wired... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: memory metric wired into stage completion... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Oversight: gate approves clean review... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Oversight: gate rejects with --reject-if... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Oversight: gate JSON safe from newline/quote injection... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: oversight gate wired + respects SKIP_GATES... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: feedback collect/create-issue/rollback wired into monitor... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: intelligence prediction validation wired... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: predictive anomaly confirmation wired... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: memory fix-outcome negative path wired... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Triage: offline fallback with recruit... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Recruit: policy integration wired... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Recruit: meta feedback loop... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Recruit: audit (negative-compounding feedback)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Autonomous: safe recruit_args quoting... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Autonomous: Claude output redirected to findings file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Autonomous: dual branch check (pipeline + daemon)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Autonomous: run_scheduler with loop/sleep... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Autonomous: trigger_pipeline_for_finding wired... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Incident: create_hotfix_issue echoes issue number... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Incident: trigger_pipeline wires --template hotfix... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Incident: trigger_rollback wires sw-feedback.sh... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mPhase 3: Quality Assurance (Code Review, Testgen, Swarm, Multi-Agent)[0m
  [38;2;0;212;255mâ–¸[0m Code review: run_claude_semantic_review exists... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Code review: semantic findings integrated... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Testgen: Claude prompt asks for real assertions... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Testgen: prompt piped to avoid shell expansion... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Swarm: spawn creates tmux session... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Swarm: retire kills tmux session... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Swarm: spawn/retire functional (real tmux)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Loop: multi-agent restarts not blocked... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mPhase 4: Meta-Cognition (Effectiveness, Self-Awareness, Capability)[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: record_stage_effectiveness creates valid JSONL... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: self-awareness hint triggers on >50% failure rate... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: effectiveness recorded on both complete and failed... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: discovery inject wired... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline: self-awareness hint injected into plan prompt... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mIntegration & Safety[0m
  [38;2;0;212;255mâ–¸[0m CI: integration-claude jobs in workflow... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Integration-claude: skip path functional... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m All modified scripts have strict mode... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m All modified scripts have ERR trap... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m No hardcoded secrets in scripts... [38;2;74;222;128mâœ“[0m

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 53 tests passed![0m


[38;2;0;212;255m[1m  shipwright activity test[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Script Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present
  [38;2;74;222;128mâœ“[0m Source guard pattern (if/then/fi)
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[1m  Help Output[0m
  [38;2;74;222;128mâœ“[0m help exits 0 and contains USAGE
  [38;2;74;222;128mâœ“[0m help lists 'watch' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'snapshot' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'history' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'stats' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'agents' subcommand
  [38;2;74;222;128mâœ“[0m --help alias works

[1m  Error Handling[0m
shipwright activity â€” Live agent activity stream

USAGE
  shipwright activity [subcommand] [options]

SUBCOMMANDS
  watch                      Live stream of agent activity (default)
  snapshot                   Current state of all active agents
  history [range]            Replay past activity (e.g., '1h', '10m', 'all')
  stats                      Running counters (events, commits, tests, agents)
  agents                     List known agents and last activity
  help                       Show this help message

OPTIONS
  --type <type>              Filter events by type (e.g., 'stage.completed')
  --agent <name>             Filter by agent name
  --team <name>              Filter by team
  --stage <name>             Filter by pipeline stage (e.g., 'build')

EXAMPLES
  shipwright activity                    # Live stream
  shipwright activity watch --type stage.*  # Only stage events
  shipwright activity history 1h           # Last hour
  shipwright activity snapshot             # Current state
  shipwright activity stats                # Counters
  [38;2;74;222;128mâœ“[0m Unknown command exits non-zero

[1m  Subcommands Without Events File[0m
  [38;2;74;222;128mâœ“[0m snapshot exits non-zero with no events
  [38;2;74;222;128mâœ“[0m stats exits non-zero with no events
  [38;2;74;222;128mâœ“[0m agents exits non-zero with no events

[1m  Event Emission[0m
WARN: Unknown event type 'test.event' â€” update config/event-schema.json
  âœ“ emit_event creates events.jsonl
  âœ“ emit_event writes valid JSON
  âœ“ Event contains type field
  âœ“ Event contains agent field
  âœ“ Event contains numeric count

  Format Helpers
  âœ“ get_icon_for_type commit returns icon
  âœ“ get_icon_for_type test.passed returns icon
  âœ“ get_icon_for_type unknown returns bullet
  âœ“ format_timestamp strips T and Z

  Stats With Events
  âœ“ stats shows Total Events
  âœ“ stats shows Commits count
  âœ“ stats shows Pipelines count

  History Subcommand
  âœ“ history all shows activity header


  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  All 28 tests passed


[38;2;0;212;255m[1m  Shipwright Adaptive Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2m  help / version[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows USAGE
  [38;2;74;222;128mâœ“[0m help shows SUBCOMMANDS
  [38;2;74;222;128mâœ“[0m help mentions get
  [38;2;74;222;128mâœ“[0m help mentions train
  [38;2;74;222;128mâœ“[0m help mentions profile
  [38;2;74;222;128mâœ“[0m version exits 0
  [38;2;74;222;128mâœ“[0m version output contains version string

[2m  error handling[0m
  [38;2;74;222;128mâœ“[0m Unknown command exits non-zero

[2m  get command[0m
  [38;2;74;222;128mâœ“[0m get timeout with default exits 0

[2m  profile command[0m
  [38;2;74;222;128mâœ“[0m profile exits 0

[2m  reset command[0m
  [38;2;74;222;128mâœ“[0m reset exits 0

[2m  script safety[0m
  [38;2;74;222;128mâœ“[0m Uses set -euo pipefail
  [38;2;74;222;128mâœ“[0m Has source guard pattern

[2m  statistical functions[0m
  [38;2;74;222;128mâœ“[0m percentile, mean, median functions defined in source
  [38;2;74;222;128mâœ“[0m mean returns numeric value (avg of 1-5 is 3)

[2m  get_timeout / get_iterations / get_model[0m
  [38;2;74;222;128mâœ“[0m get_timeout returns number (default with no events)
  [38;2;74;222;128mâœ“[0m get_iterations returns number
  [38;2;74;222;128mâœ“[0m get_model returns valid model name

[2m  train subcommand[0m
  [38;2;74;222;128mâœ“[0m train subcommand runs with mock events

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 20 tests passed[0m


[38;2;0;212;255m[1m  shipwright adversarial test[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Script Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present
  [38;2;74;222;128mâœ“[0m Source guard pattern (if/then/fi)
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[1m  Help Output[0m
  [38;2;74;222;128mâœ“[0m help exits 0 and contains USAGE
  [38;2;74;222;128mâœ“[0m help lists 'review' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'iterate' subcommand
  [38;2;74;222;128mâœ“[0m help mentions adversarial_enabled flag
  [38;2;74;222;128mâœ“[0m --help alias works
  [38;2;74;222;128mâœ“[0m -h alias works

[1m  Error Handling[0m
  [38;2;74;222;128mâœ“[0m Unknown command exits non-zero

[1m  Review Subcommand[0m
  [38;2;74;222;128mâœ“[0m review disabled returns empty JSON array
  [38;2;74;222;128mâœ“[0m review without diff arg exits non-zero

[1m  Iterate Subcommand[0m
  [38;2;74;222;128mâœ“[0m iterate without args exits non-zero
  [38;2;74;222;128mâœ“[0m iterate with empty findings converges
  [38;2;74;222;128mâœ“[0m iterate past max rounds returns findings

[1m  Configuration[0m
  [38;2;74;222;128mâœ“[0m ADVERSARIAL_MAX_ROUNDS env var respected
  [38;2;74;222;128mâœ“[0m disabled config returns empty array

[1m  Event Emission[0m
  [38;2;74;222;128mâœ“[0m emit_event creates events.jsonl
  [38;2;74;222;128mâœ“[0m emit_event writes valid JSON
  [38;2;74;222;128mâœ“[0m Event contains type field


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 21 tests passed[0m


[38;2;0;212;255m[1m  shipwright architecture-enforcer test[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Script Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present
  [38;2;74;222;128mâœ“[0m Source guard pattern (if/then/fi)
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[1m  Help Output[0m
  [38;2;74;222;128mâœ“[0m help exits 0 and contains USAGE
  [38;2;74;222;128mâœ“[0m help lists 'build' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'validate' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'evolve' subcommand
  [38;2;74;222;128mâœ“[0m help mentions architecture_enabled flag
  [38;2;74;222;128mâœ“[0m --help alias works
  [38;2;74;222;128mâœ“[0m -h alias works

[1m  Error Handling[0m
  [38;2;74;222;128mâœ“[0m Unknown command exits non-zero

[1m  Build Subcommand[0m
  [38;2;74;222;128mâœ“[0m build disabled returns empty JSON object
  [38;2;74;222;128mâœ“[0m build with enabled returns model with layers
  [38;2;74;222;128mâœ“[0m build model contains patterns array
  [38;2;74;222;128mâœ“[0m build model contains conventions array

[1m  Validate Subcommand[0m
  [38;2;74;222;128mâœ“[0m validate disabled returns empty array
  [38;2;74;222;128mâœ“[0m validate without diff arg exits non-zero
  [38;2;74;222;128mâœ“[0m validate without model file returns empty array

[1m  Evolve Subcommand[0m
  [38;2;74;222;128mâœ“[0m evolve disabled exits 0
  [38;2;74;222;128mâœ“[0m evolve without model exits 0

[1m  Model Storage[0m
  [38;2;74;222;128mâœ“[0m build stores model in ~/.shipwright/memory/
  [38;2;74;222;128mâœ“[0m Stored model is valid JSON

[1m  Event Emission[0m
  [38;2;74;222;128mâœ“[0m emit_event creates events.jsonl
  [38;2;74;222;128mâœ“[0m emit_event writes valid JSON
  [38;2;74;222;128mâœ“[0m Event contains type field


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 26 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Auth Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Help[0m
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows commands
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m unknown command shows error
[1m  Status & Users[0m
  [38;2;74;222;128mâœ“[0m status with no login shows warning
  [38;2;74;222;128mâœ“[0m users with empty shows warning
  [38;2;74;222;128mâœ“[0m token with no user errors
  [38;2;74;222;128mâœ“[0m switch without user exits non-zero
[1m  Auth Storage[0m
  [38;2;74;222;128mâœ“[0m auth file has users array
  [38;2;74;222;128mâœ“[0m auth file has active_user
  [38;2;74;222;128mâœ“[0m users lists stored user
  [38;2;74;222;128mâœ“[0m token shows stored token
  [38;2;74;222;128mâœ“[0m user info shows login
  [38;2;74;222;128mâœ“[0m switch to nonexistent errors
  [38;2;74;222;128mâœ“[0m logout succeeds

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 15 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Autonomous Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;74;222;128mâœ“[0m help shows usage text
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m unknown command exits 1
  [38;2;74;222;128mâœ“[0m start shows running message
  [38;2;74;222;128mâœ“[0m state.json created after start
  [38;2;74;222;128mâœ“[0m state status is running
  [38;2;74;222;128mâœ“[0m config.json created
  [38;2;74;222;128mâœ“[0m config is valid JSON
  [38;2;74;222;128mâœ“[0m status shows dashboard
  [38;2;74;222;128mâœ“[0m pause sets status to paused
  [38;2;74;222;128mâœ“[0m resume sets status to running
  [38;2;74;222;128mâœ“[0m stop sets status to stopped
  [38;2;74;222;128mâœ“[0m config show displays settings
  [38;2;74;222;128mâœ“[0m config set interval works
  [38;2;74;222;128mâœ“[0m history handles no data

[1m  Config Set/Show Cycle[0m
  [38;2;74;222;128mâœ“[0m config show reflects set value
  [38;2;74;222;128mâœ“[0m config value persists in file

[1m  Config Structure[0m
  [38;2;74;222;128mâœ“[0m config contains key: cycle_interval_minutes
  [38;2;74;222;128mâœ“[0m config contains key: max_issues_per_cycle
  [38;2;74;222;128mâœ“[0m config contains key: daemon_aware

[1m  History With Fixture Events[0m
  [38;2;74;222;128mâœ“[0m history shows recent cycles
  [38;2;74;222;128mâœ“[0m history shows cycle entries

[1m  Status Fields[0m
  [38;2;74;222;128mâœ“[0m status when running includes Status
  [38;2;74;222;128mâœ“[0m status when running includes Cycles
  [38;2;74;222;128mâœ“[0m status when running includes Issues Created
  [38;2;74;222;128mâœ“[0m status when running includes Pipelines
  [38;2;74;222;128mâœ“[0m status when running includes Cycle Interval
  [38;2;74;222;128mâœ“[0m status when running shows running
  [38;2;74;222;128mâœ“[0m status when stopped shows stopped

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 30 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Changelog Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2m  help / version[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows USAGE
  [38;2;74;222;128mâœ“[0m help mentions generate
  [38;2;74;222;128mâœ“[0m help mentions preview
  [38;2;74;222;128mâœ“[0m help mentions version
  [38;2;74;222;128mâœ“[0m help mentions migrate
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[2m  error handling[0m
  [38;2;74;222;128mâœ“[0m Unknown command exits non-zero

[2m  formats command[0m
  [38;2;74;222;128mâœ“[0m formats exits 0

[2m  generate command[0m
  [38;2;74;222;128mâœ“[0m generate exits 0

[2m  version command[0m
  [38;2;74;222;128mâœ“[0m version recommendation exits 0

[2m  script safety[0m
  [38;2;74;222;128mâœ“[0m Uses set -euo pipefail
  [38;2;74;222;128mâœ“[0m Has source guard pattern

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 13 tests passed[0m


[38;2;0;212;255m[1m  shipwright checkpoint test[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Script Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[1m  Help Output[0m
  [38;2;74;222;128mâœ“[0m help exits 0 and contains USAGE
  [38;2;74;222;128mâœ“[0m help lists 'save' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'restore' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'list' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'clear' subcommand
  [38;2;74;222;128mâœ“[0m help lists 'expire' subcommand
  [38;2;74;222;128mâœ“[0m --help alias works
  [38;2;74;222;128mâœ“[0m -h alias works

[1m  Error Handling[0m

shipwright checkpoint v3.1.0 â€” Save and restore agent state mid-stage

USAGE
  shipwright checkpoint <command> [options]

COMMANDS
  save           Save a checkpoint for a stage
  restore        Restore a checkpoint (prints JSON to stdout)
  save-context   Save Claude context (goal, findings, test output) for resume
  restore-context Restore Claude context (exports RESTORED_* and SW_LOOP_* vars)
  list      Show all available checkpoints
  clear     Remove checkpoint(s)
  expire    Remove checkpoints older than N hours

SAVE OPTIONS
  --stage <name>              Stage name (required)
  --iteration <n>             Current iteration number
  --git-sha <sha>             Git commit SHA (default: HEAD)
  --files-modified "f1,f2"    Comma-separated list of modified files
  --tests-passing             Mark tests as passing
  --loop-state <state>        Loop state (running, paused, etc.)

RESTORE OPTIONS
  --stage <name>              Stage to restore (required)

CLEAR OPTIONS
  --stage <name>              Stage to clear
  --all                       Clear all checkpoints

EXPIRE OPTIONS
  --hours <n>                 Max age in hours (default: 24)

EXAMPLES
  shipwright checkpoint save --stage build --iteration 5
  shipwright checkpoint save --stage build --iteration 3 --tests-passing --files-modified "src/auth.ts,src/middleware.ts"
  shipwright checkpoint restore --stage build
  shipwright checkpoint list
  shipwright checkpoint clear --stage build
  shipwright checkpoint clear --all
  shipwright checkpoint expire --hours 48
  [38;2;74;222;128mâœ“[0m Unknown command exits non-zero

[1m  Save Subcommand[0m

shipwright checkpoint v3.1.0 â€” Save and restore agent state mid-stage

USAGE
  shipwright checkpoint <command> [options]

COMMANDS
  save           Save a checkpoint for a stage
  restore        Restore a checkpoint (prints JSON to stdout)
  save-context   Save Claude context (goal, findings, test output) for resume
  restore-context Restore Claude context (exports RESTORED_* and SW_LOOP_* vars)
  list      Show all available checkpoints
  clear     Remove checkpoint(s)
  expire    Remove checkpoints older than N hours

SAVE OPTIONS
  --stage <name>              Stage name (required)
  --iteration <n>             Current iteration number
  --git-sha <sha>             Git commit SHA (default: HEAD)
  --files-modified "f1,f2"    Comma-separated list of modified files
  --tests-passing             Mark tests as passing
  --loop-state <state>        Loop state (running, paused, etc.)

RESTORE OPTIONS
  --stage <name>              Stage to restore (required)

CLEAR OPTIONS
  --stage <name>              Stage to clear
  --all                       Clear all checkpoints

EXPIRE OPTIONS
  --hours <n>                 Max age in hours (default: 24)

EXAMPLES
  shipwright checkpoint save --stage build --iteration 5
  shipwright checkpoint save --stage build --iteration 3 --tests-passing --files-modified "src/auth.ts,src/middleware.ts"
  shipwright checkpoint restore --stage build
  shipwright checkpoint list
  shipwright checkpoint clear --stage build
  shipwright checkpoint clear --all
  shipwright checkpoint expire --hours 48
  [38;2;74;222;128mâœ“[0m save without --stage exits non-zero
âœ“ Checkpoint saved for stage build (iteration 5)
  [38;2;74;222;128mâœ“[0m save creates checkpoint file
  [38;2;74;222;128mâœ“[0m Checkpoint is valid JSON
  [38;2;74;222;128mâœ“[0m Checkpoint stage field correct
  [38;2;74;222;128mâœ“[0m Checkpoint iteration field correct
  [38;2;74;222;128mâœ“[0m Checkpoint git_sha populated
âœ“ Checkpoint saved for stage test (iteration 0)
  [38;2;74;222;128mâœ“[0m save --tests-passing sets true
âœ“ Checkpoint saved for stage review (iteration 0)
  [38;2;74;222;128mâœ“[0m save --files-modified stores 2 files
âœ“ Checkpoint saved for stage deploy (iteration 0)
  [38;2;74;222;128mâœ“[0m save --loop-state stores state
  [38;2;74;222;128mâœ“[0m Checkpoint created_at timestamp present

[1m  Restore Subcommand[0m
  [38;2;74;222;128mâœ“[0m restore returns checkpoint JSON
  [38;2;74;222;128mâœ“[0m Restored checkpoint has correct stage
  [38;2;74;222;128mâœ“[0m restore missing stage exits non-zero
  [38;2;74;222;128mâœ“[0m restore without --stage exits non-zero

[1m  List Subcommand[0m
  [38;2;74;222;128mâœ“[0m list shows Checkpoints header
  [38;2;74;222;128mâœ“[0m list shows build checkpoint
  [38;2;74;222;128mâœ“[0m list shows checkpoint count
  [38;2;74;222;128mâœ“[0m list with no checkpoints shows empty

[1m  Clear Subcommand[0m
âœ“ Checkpoint saved for stage build (iteration 1)
âœ“ Checkpoint saved for stage test (iteration 2)
âœ“ Cleared checkpoint for stage build
  [38;2;74;222;128mâœ“[0m clear --stage removes specific checkpoint
  [38;2;74;222;128mâœ“[0m clear --stage preserves other checkpoints
  [38;2;74;222;128mâœ“[0m clear without args exits non-zero
âœ“ Checkpoint saved for stage build (iteration 3)
âœ“ Cleared 2 checkpoint(s)
  [38;2;74;222;128mâœ“[0m clear --all removes all checkpoints

[1m  Expire Subcommand[0m
  [38;2;74;222;128mâœ“[0m expire with no checkpoints exits 0

[1m  Save-context / Restore-context[0m
  [38;2;74;222;128mâœ“[0m save-context creates claude-context.json
  [38;2;74;222;128mâœ“[0m Context goal saved correctly
  [38;2;74;222;128mâœ“[0m Context iteration saved correctly
  [38;2;74;222;128mâœ“[0m restore-context exports RESTORED_GOAL
  [38;2;74;222;128mâœ“[0m restore-context exports SW_LOOP_GOAL


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 40 tests passed[0m


[38;2;0;212;255m[1m  Shipwright CI Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;74;222;128mâœ“[0m help shows usage text
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m version shows version
  [38;2;74;222;128mâœ“[0m unknown command exits 1
  [38;2;74;222;128mâœ“[0m generate starts processing
  [38;2;74;222;128mâœ“[0m validate runs on valid workflow
  [38;2;74;222;128mâœ“[0m VERSION is defined
  [38;2;74;222;128mâœ“[0m analyze shows analysis
  [38;2;74;222;128mâœ“[0m analyze shows cache info
  [38;2;74;222;128mâœ“[0m matrix generates config
  [38;2;74;222;128mâœ“[0m matrix workflow file exists
  [38;2;74;222;128mâœ“[0m validate passes on valid workflow
  [38;2;74;222;128mâœ“[0m runners list shows options
  [38;2;74;222;128mâœ“[0m runners recommend shows guidance

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 15 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Cleanup Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Help[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows --force
  [38;2;74;222;128mâœ“[0m help shows dry-run

[1m  Dry-Run (Empty)[0m
  [38;2;74;222;128mâœ“[0m dry-run shows Tmux Windows section
  [38;2;74;222;128mâœ“[0m dry-run shows Team Configs section
  [38;2;74;222;128mâœ“[0m dry-run shows Task Lists section
  [38;2;74;222;128mâœ“[0m dry-run shows Pipeline Artifacts section
  [38;2;74;222;128mâœ“[0m dry-run shows Pipeline State section
  [38;2;74;222;128mâœ“[0m dry-run shows Heartbeats section
  [38;2;74;222;128mâœ“[0m dry-run reports clean

[1m  Force Mode (Empty)[0m
  [38;2;74;222;128mâœ“[0m force shows FORCE MODE
  [38;2;74;222;128mâœ“[0m force reports nothing to clean

[1m  Detect Team Configs[0m
  [38;2;74;222;128mâœ“[0m dry-run detects team dir
  [38;2;74;222;128mâœ“[0m dry-run shows would remove

[1m  Force Removes Teams[0m
  [38;2;74;222;128mâœ“[0m force removes team dir
  [38;2;74;222;128mâœ“[0m team directory actually removed

[1m  Detect Task Lists[0m
  [38;2;74;222;128mâœ“[0m dry-run detects task dir
  [38;2;74;222;128mâœ“[0m task directory actually removed

[1m  Detect Stale Heartbeats[0m
  [38;2;74;222;128mâœ“[0m dry-run detects stale heartbeat

[1m  Error Handling[0m
  [38;2;74;222;128mâœ“[0m unknown option exits non-zero
  [38;2;74;222;128mâœ“[0m unknown option shows error

[1m  Summary Counting[0m
  [38;2;74;222;128mâœ“[0m summary shows found count
  [38;2;74;222;128mâœ“[0m summary shows --force hint

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 24 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Code Review Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;74;222;128mâœ“[0m help shows usage text
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m review runs and starts reviewing
  [38;2;74;222;128mâœ“[0m trends with no data
  [38;2;74;222;128mâœ“[0m config show outputs valid config
  [38;2;74;222;128mâœ“[0m unknown subcommand exits nonzero
  [38;2;74;222;128mâœ“[0m no false long function detection on small file
  [38;2;74;222;128mâœ“[0m style consistency check runs without crash
  [38;2;74;222;128mâœ“[0m architecture boundary check runs without crash

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 10 tests passed[0m


[38;2;0;212;255m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;0;212;255m[1mâ•‘  shipwright connect â€” Test Suite                 â•‘[0m
[38;2;0;212;255m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m

[38;2;124;58;237m[1mIdentity Resolution[0m
  [38;2;0;212;255mâ–¸[0m resolve_developer_id from DEVELOPER_ID env... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m resolve_developer_id from git config... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m resolve_developer_id fallback to USER... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m resolve_machine_name from MACHINE_NAME env... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m resolve_machine_name from hostname... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mDashboard URL Resolution[0m
  [38;2;0;212;255mâ–¸[0m resolve_dashboard_url from --url flag... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m resolve_dashboard_url from DASHBOARD_URL env... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m resolve_dashboard_url from team-config.json... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m resolve_dashboard_url falls back to default... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mStart/Stop Lifecycle[0m
  [38;2;0;212;255mâ–¸[0m cmd_start creates PID file... â–¸ Starting connect to http://localhost:8767
â–¸ Developer: test-developer @ test-machine
âœ“ Connect started (PID 1107704)
  Logs: /tmp/sw-connect-test.BMP1IS/home/.shipwright/connect.log
  Stop: shipwright connect stop
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m cmd_start rejects if already running...   Stop it first: shipwright connect stop
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m cmd_stop removes PID file... âš  Process 99999 not running â€” cleaning up stale PID file
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m cmd_stop handles missing PID gracefully... âš  Connect is not running (no PID file)
[38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mStatus[0m
  [38;2;0;212;255mâ–¸[0m cmd_status shows connected when PID alive... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m cmd_status shows disconnected when no PID... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mJoin Flow[0m
  [38;2;0;212;255mâ–¸[0m cmd_join verifies token against dashboard... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m cmd_join saves team-config.json... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m cmd_join rejects invalid token... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m cmd_join accepts --url and --token flags... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mHeartbeat & Disconnect Payloads[0m
  [38;2;0;212;255mâ–¸[0m Heartbeat payload includes required fields... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Send disconnect sends proper payload... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mConfiguration & Utilities[0m
  [38;2;0;212;255mâ–¸[0m ensure_dir creates shipwright directory... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m now_iso returns valid ISO timestamp... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Script has correct version... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mIntegration[0m
  [38;2;0;212;255mâ–¸[0m Help command shows all main commands... [38;2;74;222;128mâœ“[0m

[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[38;2;74;222;128m[1m  All 25 tests passed âœ“[0m
[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


[38;2;0;212;255m[1m  Shipwright Context Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;0;212;255mhelp command[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows commands
  [38;2;74;222;128mâœ“[0m --help exits 0

  [38;2;0;212;255merror handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits 1
  [38;2;74;222;128mâœ“[0m unknown command shows error

  [38;2;0;212;255mshow subcommand[0m
  [38;2;74;222;128mâœ“[0m show exits 0
  [38;2;74;222;128mâœ“[0m show outputs context header

  [38;2;0;212;255mclear subcommand[0m
  [38;2;74;222;128mâœ“[0m clear exits 0
  [38;2;74;222;128mâœ“[0m clear confirms cleared

  [38;2;0;212;255mgather subcommand[0m
  [38;2;74;222;128mâœ“[0m gather without args exits 1
  [38;2;74;222;128mâœ“[0m gather shows must provide
  [38;2;74;222;128mâœ“[0m gather with unknown option exits 1

  [38;2;0;212;255mgather with goal[0m
  [38;2;74;222;128mâœ“[0m gather exits 0
  [38;2;74;222;128mâœ“[0m gather shows building
  [38;2;74;222;128mâœ“[0m gather shows success
  [38;2;74;222;128mâœ“[0m context-bundle.md created

  [38;2;0;212;255mshow after gather[0m
  [38;2;74;222;128mâœ“[0m show after gather exits 0
  [38;2;74;222;128mâœ“[0m show contains pipeline context

  [38;2;0;212;255mclear after gather[0m
  [38;2;74;222;128mâœ“[0m clear exits 0

  [38;2;0;212;255mgather with issue[0m
  [38;2;74;222;128mâœ“[0m gather with --issue exits 0
  [38;2;74;222;128mâœ“[0m gather shows building

  [38;2;0;212;255mgather default stage[0m
  [38;2;74;222;128mâœ“[0m gather default stage exits 0

  [38;2;0;212;255minternal stage_guidance[0m
  [38;2;74;222;128mâœ“[0m stage_guidance returns plan guidance
  [38;2;74;222;128mâœ“[0m stage_guidance returns build guidance
  [38;2;74;222;128mâœ“[0m stage_guidance handles unknown stage

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 26 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Cost Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2m  help / version[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows USAGE
  [38;2;74;222;128mâœ“[0m help shows COMMANDS
  [38;2;74;222;128mâœ“[0m help mentions show
  [38;2;74;222;128mâœ“[0m help mentions budget
  [38;2;74;222;128mâœ“[0m help mentions calculate
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[2m  state management[0m
  [38;2;74;222;128mâœ“[0m costs.json created on first use
  [38;2;74;222;128mâœ“[0m budget.json created on first use
  [38;2;74;222;128mâœ“[0m costs.json has entries array
  [38;2;74;222;128mâœ“[0m budget.json has daily_budget_usd

[2m  budget commands[0m
  [38;2;74;222;128mâœ“[0m budget set exits 0
  [38;2;74;222;128mâœ“[0m budget set to 50
  [38;2;74;222;128mâœ“[0m budget show exits 0

[2m  error handling[0m
  [38;2;74;222;128mâœ“[0m Unknown command exits non-zero

[2m  calculate[0m
  [38;2;74;222;128mâœ“[0m calculate exits 0

[2m  script safety[0m
  [38;2;74;222;128mâœ“[0m Uses set -euo pipefail
  [38;2;74;222;128mâœ“[0m ERR trap is set

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 18 tests passed[0m


[38;2;124;58;237m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;124;58;237m[1mâ•‘  shipwright daemon test â€” Unit Tests (Synthetic Events)           â•‘[0m
[38;2;124;58;237m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m
[38;2;74;222;128mâœ“[0m Environment ready: [2m/tmp/sw-daemon-test.4AOCMy[0m

  [38;2;0;212;255mâ–¸[0m dora_grade deploy_freq Elite (>= 7)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m dora_grade deploy_freq High (>= 1)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m dora_grade deploy_freq Medium (>= 0.25)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m dora_grade deploy_freq Low (< 0.25)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m dora_grade CFR thresholds (Elite/High/Medium/Low)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Stage timings filter-first jq query... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m MTTR pairs failures with next success... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m epoch_to_iso helper function... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Health check detects stale jobs... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Priority label sorting... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Degradation alert triggers on high CFR... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Metrics --json output with cycle_time keys... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Self-labeling includes watch_label when enabled... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Self-labeling excludes watch_label when disabled... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Patrol recurring failures label construction... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m DORA degradation event detection... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Retry exhaustion event detection... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Untested script detection logic... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Progress detects stage advancement... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Progress detects stuck (no change N checks)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Progress detects repeated error loop... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Progress resets on diff growth... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Hard limit kills even with progress on... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Adaptive cycles extends limit on >50% issue drop... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Adaptive cycles reduces limit on issue increase... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Adaptive cycles respects 2x base hard ceiling... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Adaptive cycles no-op on first cycle... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Cleanup: Checkpoint expire removes old checkpoints... â–¸ Expired: build checkpoint (1h+ old)
âœ“ Expired 1 checkpoint(s) older than 1h
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Cleanup: Failure handler removes watch label... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Cleanup: Failure handler closes draft PRs... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Cleanup: sw-cleanup.sh has all artifact cleanup sections... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Daemon sources vitals module... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Vitals verdict maps to daemon verdict (continueâ†’healthy etc)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Vitals emits pipeline.vitals_check events... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Auto-scale includes vitals health factor... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Quality memory drives template selection... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Vitals-based progress with static fallback... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Memory: query fix for error returns matching fix... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Memory: DORA template escalation patterns exist... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Memory: All 12 error categories in post-tool-use.sh... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Daemon: Template weights selection reads weights file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Daemon: Auto-enable self_optimize when auto_template is true... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intelligence: classify_failure detects auth errors... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intelligence: classify_failure has all 6 failure classes... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intelligence: Retry skips auth_error and invalid_issue... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intelligence: API errors get extended 300s backoff... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intelligence: daemon_preflight_auth_check exists and auto-pauses... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intelligence: Process group spawning (set -m)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intelligence: Process tree kill in cleanup (pkill -P)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intelligence: Consecutive failure auto-pause (3 threshold)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intelligence: Retry escalation args passed to spawn... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intelligence: classify_failure wired into retry logic... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mâ”â”â” Results â”â”â”[0m
  [38;2;74;222;128mPassed:[0m 66
  [38;2;248;113;113mFailed:[0m 0
  [2mTotal:[0m  52

[38;2;74;222;128m[1mAll 66 tests passed![0m


[38;2;124;58;237m[1mDashboard Smoke Tests[0m

[38;2;124;58;237m[1mStructure[0m
  [38;2;0;212;255mâ–¸[0m server.ts exists... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m server.ts has valid structure (imports, fetch)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m public/ directory exists... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m index.html exists... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m src/ directory exists... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m main.ts entry point exists... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m tsconfig.json exists... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m src/ modules exist (core, views, components, design, types, canvas)... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mRoutes[0m
  [38;2;0;212;255mâ–¸[0m Server exports /api/health and /api/status... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Server exports /ws WebSocket route... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mIntegrity[0m
  [38;2;0;212;255mâ–¸[0m bun check passes (if bun available)...     [2m(bun not installed, skipping)[0m
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m index.html references dist/main.js... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Frontend bundle builds (if bun available)...     [2m(bun not installed, skipping)[0m
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m TypeScript type check passes (if tsc available)...     [2m(typescript not installed, skipping)[0m
[38;2;74;222;128mâœ“[0m

[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[38;2;74;222;128m[1m  All 14 tests passed âœ“[0m
[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


[38;2;0;212;255m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;0;212;255m[1mâ•‘  shipwright db â€” SQLite Persistence Test Suite        â•‘[0m
[38;2;0;212;255m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m

[38;2;124;58;237m[1mSchema Creation[0m
  [38;2;0;212;255mâ–¸[0m init_schema creates all tables... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Schema includes required tables... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m WAL mode is enabled... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m check_sqlite3 caches result... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mDatabase Availability[0m
  [38;2;0;212;255mâ–¸[0m db_available returns true when ready... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_available returns false without sqlite3... /tmp/sw-db-test.c026Dw/sw-db.sh: line 18: dirname: command not found
[38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mEvent CRUD Operations[0m
  [38;2;0;212;255mâ–¸[0m db_add_event inserts event... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m add_event dual-writes to SQLite + JSONL... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mDaemon State Management[0m
  [38;2;0;212;255mâ–¸[0m db_save_job saves active job... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_complete_job marks completed... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_fail_job marks failed... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_list_active_jobs returns JSON array... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_active_job_count returns count... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_is_issue_active checks status... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mCost Tracking[0m
  [38;2;0;212;255mâ–¸[0m db_record_cost saves entry... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_cost_today calculates total... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_set_budget and db_get_budget... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mHeartbeat Management[0m
  [38;2;0;212;255mâ–¸[0m db_record_heartbeat saves heartbeat... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_list_heartbeats returns array... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_clear_heartbeat deletes entry... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mMemory & Failure Tracking[0m
  [38;2;0;212;255mâ–¸[0m db_record_failure saves pattern... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m db_query_similar_failures finds matches... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mJSON Data Migration[0m
  [38;2;0;212;255mâ–¸[0m migrate_json_data imports events... [38;2;0;212;255m[1mâ–¸[0m Migrating schema v0 â†’ v2...
[38;2;74;222;128m[1mâœ“[0m Migrated to schema v2
[38;2;0;212;255m[1mâ–¸[0m Migrating schema v0 â†’ v3...
[38;2;74;222;128m[1mâœ“[0m Migrated to schema v3
[38;2;0;212;255m[1mâ–¸[0m Migrating schema v0 â†’ v4...
[38;2;74;222;128m[1mâœ“[0m Migrated to schema v4
[38;2;0;212;255m[1mâ–¸[0m Migrating schema v0 â†’ v5...
[38;2;74;222;128m[1mâœ“[0m Migrated to schema v5
[38;2;0;212;255m[1mâ–¸[0m Migrating schema v0 â†’ v6...
[38;2;74;222;128m[1mâœ“[0m Migrated to schema v6
[38;2;0;212;255m[1mâ–¸[0m Importing events from /tmp/sw-db-test.c026Dw/home/.shipwright/events.jsonl...
[38;2;74;222;128m[1mâœ“[0m Events: 2 imported, 0 skipped (duplicates)
[38;2;0;212;255m[1mâ–¸[0m Importing heartbeats...
[38;2;74;222;128m[1mâœ“[0m Heartbeats: 0 imported

[38;2;74;222;128m[1mâœ“[0m Migration complete: 2 total records imported

[38;2;0;212;255m[1mâ–¸[0m Verification:
  Events in DB:     2
  Cost entries:     0
  Heartbeats:       0
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m migrate_json_data imports costs... [38;2;0;212;255m[1mâ–¸[0m Database already at schema v6
[38;2;0;212;255m[1mâ–¸[0m Importing events from /tmp/sw-db-test.c026Dw/home/.shipwright/events.jsonl...
[38;2;74;222;128m[1mâœ“[0m Events: 2 imported, 0 skipped (duplicates)
[38;2;0;212;255m[1mâ–¸[0m Importing costs from /tmp/sw-db-test.c026Dw/home/.shipwright/costs.json...
[38;2;74;222;128m[1mâœ“[0m Costs: 2 entries imported
[38;2;0;212;255m[1mâ–¸[0m Importing heartbeats...
[38;2;74;222;128m[1mâœ“[0m Heartbeats: 0 imported

[38;2;74;222;128m[1mâœ“[0m Migration complete: 4 total records imported

[38;2;0;212;255m[1mâ–¸[0m Verification:
  Events in DB:     2
  Cost entries:     2
  Heartbeats:       0
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m migrate_json_data imports budget... [38;2;0;212;255m[1mâ–¸[0m Database already at schema v6
[38;2;0;212;255m[1mâ–¸[0m Importing events from /tmp/sw-db-test.c026Dw/home/.shipwright/events.jsonl...
[38;2;74;222;128m[1mâœ“[0m Events: 2 imported, 0 skipped (duplicates)
[38;2;0;212;255m[1mâ–¸[0m Importing costs from /tmp/sw-db-test.c026Dw/home/.shipwright/costs.json...
[38;2;74;222;128m[1mâœ“[0m Costs: 2 entries imported
[38;2;0;212;255m[1mâ–¸[0m Importing budget from /tmp/sw-db-test.c026Dw/home/.shipwright/budget.json...
[38;2;74;222;128m[1mâœ“[0m Budget: imported ($50.00, enabled=true)
[38;2;0;212;255m[1mâ–¸[0m Importing heartbeats...
[38;2;74;222;128m[1mâœ“[0m Heartbeats: 0 imported

[38;2;74;222;128m[1mâœ“[0m Migration complete: 4 total records imported

[38;2;0;212;255m[1mâ–¸[0m Verification:
  Events in DB:     2
  Cost entries:     2
  Heartbeats:       0
[38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mHealth Checks[0m
  [38;2;0;212;255mâ–¸[0m db_health_check validates database... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mExport & Backup[0m
  [38;2;0;212;255mâ–¸[0m export_db creates JSON backup... [38;2;0;212;255m[1mâ–¸[0m Exporting database to /tmp/sw-db-test.c026Dw/home/.shipwright/test-backup.json...
[38;2;74;222;128m[1mâœ“[0m Database exported to /tmp/sw-db-test.c026Dw/home/.shipwright/test-backup.json
[38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mData Cleanup[0m
  [38;2;0;212;255mâ–¸[0m cleanup_old_data removes old entries... [38;2;0;212;255m[1mâ–¸[0m Cleaning records older than 30 days (before 2026-01-26T20:56:09Z)...
[38;2;74;222;128m[1mâœ“[0m Deleted: 0 events, 0 costs, 0 daemon jobs, 0 stages
[38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mConcurrent Operations[0m
  [38;2;0;212;255mâ–¸[0m Concurrent writes don't corrupt DB... 5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
5000
[38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mPipeline Run Tracking[0m
  [38;2;0;212;255mâ–¸[0m add_pipeline_run creates entry... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m update_pipeline_status updates run... [38;2;74;222;128mâœ“[0m

[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[38;2;74;222;128m[1m  All 31 tests passed âœ“[0m
[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


[38;2;0;212;255m[1m  Shipwright Decompose Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;0;212;255mhelp command[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows commands
  [38;2;74;222;128mâœ“[0m --help exits 0

  [38;2;0;212;255mversion flag[0m
  [38;2;74;222;128mâœ“[0m --version exits 0
  [38;2;74;222;128mâœ“[0m --version shows version

  [38;2;0;212;255merror handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits 1
  [38;2;74;222;128mâœ“[0m unknown command shows error
  [38;2;74;222;128mâœ“[0m analyze without issue exits 1
  [38;2;74;222;128mâœ“[0m analyze shows usage
  [38;2;74;222;128mâœ“[0m decompose without issue exits 1
  [38;2;74;222;128mâœ“[0m auto without issue exits 1

  [38;2;0;212;255manalyze subcommand (mock)[0m
  [38;2;74;222;128mâœ“[0m analyze exits 0 with NO_GITHUB
  [38;2;74;222;128mâœ“[0m analyze outputs complexity_score
  [38;2;74;222;128mâœ“[0m analyze outputs should_decompose
  [38;2;74;222;128mâœ“[0m analyze outputs subtasks
  [38;2;74;222;128mâœ“[0m analyze outputs valid JSON
  [38;2;74;222;128mâœ“[0m analyze returns complexity_score 85
  [38;2;74;222;128mâœ“[0m analyze returns should_decompose true

  [38;2;0;212;255mdecompose subcommand (mock)[0m
  [38;2;74;222;128mâœ“[0m decompose exits 0 with NO_GITHUB
  [38;2;74;222;128mâœ“[0m decompose shows decomposing

  [38;2;0;212;255mauto subcommand (mock)[0m
  [38;2;74;222;128mâœ“[0m auto exits 0 with NO_GITHUB

  [38;2;0;212;255mstate file creation[0m
  [38;2;74;222;128mâœ“[0m events.jsonl created

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 23 tests passed[0m


[38;2;0;212;255m[1m  sw-decide Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


  [38;2;0;212;255mhelp[0m
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help mentions run
  [38;2;74;222;128mâœ“[0m help mentions status
  [38;2;74;222;128mâœ“[0m help mentions tiers
  [38;2;74;222;128mâœ“[0m help mentions candidates
  [38;2;74;222;128mâœ“[0m help mentions halt
  [38;2;74;222;128mâœ“[0m help mentions resume
  [38;2;74;222;128mâœ“[0m help mentions dry-run
  [38;2;74;222;128mâœ“[0m --help shows usage

  [38;2;0;212;255mtiers[0m
  [38;2;74;222;128mâœ“[0m tiers shows auto
  [38;2;74;222;128mâœ“[0m tiers shows propose
  [38;2;74;222;128mâœ“[0m tiers shows draft
  [38;2;74;222;128mâœ“[0m tiers shows category rules
  [38;2;74;222;128mâœ“[0m tiers shows limits

  [38;2;0;212;255msignals[0m
  âœ“ candidate has id
  âœ“ candidate has signal
  âœ“ candidate has category
  âœ“ candidate has risk_score
  âœ“ candidate has dedup_key
  âœ“ candidate has collected_at
  âœ“ candidate is valid JSON
  âœ“ read_pending returns data
  âœ“ clear_pending empties file

  [38;2;0;212;255mscoring[0m
  âœ“ scored has value_score
  âœ“ scored has scores object
  âœ“ critical security scores well (75)
  âœ“ security scores higher than dead_code (75 > 33)
  âœ“ impact weight loaded
  âœ“ urgency weight loaded

  [38;2;0;212;255mautonomy[0m
  âœ“ deps_patch -> auto
  âœ“ refactor_hotspot -> propose
  âœ“ new_feature -> draft
  âœ“ unknown -> draft
  âœ“ auto labels include shipwright
  âœ“ auto labels include ready-to-build
  âœ“ propose labels include proposed
jq: parse error: Unmatched '}' at line 1, column 111
jq: parse error: Unmatched '}' at line 1, column 111
  âœ“ budget available with no decisions
jq: parse error: Unmatched '}' at line 1, column 111
  âœ“ budget exhausted after 16 issues
  âœ“ rate limit passes with no history
jq: parse error: Unmatched '}' at line 1, column 111
  âœ“ rate limit blocks recent decision
  âœ“ not halted initially
  âœ“ halted after halt()
  âœ“ halt file created
  âœ“ resumed after resume()

  [38;2;0;212;255mrisk ceiling[0m
  âœ“ risk 20 below ceiling 30
  âœ“ risk 35 above ceiling 30

  [38;2;0;212;255mdry-run[0m
  [38;2;74;222;128mâœ“[0m dry-run shows DRY RUN
  [38;2;74;222;128mâœ“[0m no daily log created in dry-run
  [38;2;74;222;128mâœ“[0m no drafts in dry-run

  [38;2;0;212;255mdecision log[0m
  âœ“ daily log exists
  âœ“ log has decision id
  âœ“ log has value_score
  âœ“ last-decision written

  [38;2;0;212;255moutcome learning[0m
  âœ“ urgency weight adjusted on security success (25)
  âœ“ risk weight increased on failure (13 >= 13)
  âœ“ weights sum to 100
  âœ“ weights file written

  [38;2;0;212;255mcandidates[0m
  [38;2;74;222;128mâœ“[0m candidates shows title
  [38;2;74;222;128mâœ“[0m candidates shows signal

  [38;2;0;212;255mhalt/resume CLI[0m
  [38;2;74;222;128mâœ“[0m halt succeeds
  [38;2;74;222;128mâœ“[0m run blocked when halted
  [38;2;74;222;128mâœ“[0m resume succeeds

  [38;2;0;212;255mstatus[0m
  [38;2;74;222;128mâœ“[0m status shows active
  [38;2;74;222;128mâœ“[0m status shows decisions
  [38;2;74;222;128mâœ“[0m status shows budget
  [38;2;74;222;128mâœ“[0m status shows weights

  [38;2;0;212;255mcycle integration[0m
  [38;2;74;222;128mâœ“[0m cycle shows Decision Engine
  [38;2;74;222;128mâœ“[0m cycle shows Cycle Complete
  [38;2;74;222;128mâœ“[0m cycle processes candidates
  [38;2;74;222;128mâœ“[0m cycle shows AUTO tier
  [38;2;74;222;128mâœ“[0m cycle shows DRAFT tier

  [38;2;0;212;255mlog command[0m
  [38;2;74;222;128mâœ“[0m log shows today's date
  [38;2;74;222;128mâœ“[0m log shows entry

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 33 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Deps Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;0;212;255mhelp command[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows commands
  [38;2;74;222;128mâœ“[0m --help exits 0

  [38;2;0;212;255merror handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits 1
  [38;2;74;222;128mâœ“[0m unknown command shows error

  [38;2;0;212;255mscan subcommand[0m
  [38;2;74;222;128mâœ“[0m scan exits 0 with NO_GITHUB
  [38;2;74;222;128mâœ“[0m scan shows warning

  [38;2;0;212;255mclassify subcommand[0m
  [38;2;74;222;128mâœ“[0m classify without args exits 1
  [38;2;74;222;128mâœ“[0m classify shows usage
  [38;2;74;222;128mâœ“[0m classify exits 0 with NO_GITHUB
  [38;2;74;222;128mâœ“[0m classify shows warning

  [38;2;0;212;255mbatch subcommand[0m
  [38;2;74;222;128mâœ“[0m batch exits 0 with NO_GITHUB
  [38;2;74;222;128mâœ“[0m batch shows warning

  [38;2;0;212;255mreport subcommand[0m
  [38;2;74;222;128mâœ“[0m report exits 0 with NO_GITHUB
  [38;2;74;222;128mâœ“[0m report shows warning

  [38;2;0;212;255mmerge subcommand[0m
  [38;2;74;222;128mâœ“[0m merge without args exits 1

  [38;2;0;212;255mtest subcommand[0m
  [38;2;74;222;128mâœ“[0m test without args exits 1

  [38;2;0;212;255minternal parse_version_bump[0m
  [38;2;74;222;128mâœ“[0m parse_version_bump detects patch
  [38;2;74;222;128mâœ“[0m parse_version_bump detects minor
  [38;2;74;222;128mâœ“[0m parse_version_bump detects major
  [38;2;74;222;128mâœ“[0m parse_version_bump handles v prefix

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 22 tests passed[0m


[38;2;0;212;255m[1m  shipwright developer-simulation test[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1mScript Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present
  [38;2;74;222;128mâœ“[0m source guard uses if/then/fi pattern

[1mVersion[0m
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[1mHelp Output[0m
  [38;2;74;222;128mâœ“[0m help contains USAGE
  [38;2;74;222;128mâœ“[0m help contains review subcommand
  [38;2;74;222;128mâœ“[0m help contains address subcommand
  [38;2;74;222;128mâœ“[0m help contains PERSONAS
  [38;2;74;222;128mâœ“[0m help contains simulation_enabled
  [38;2;74;222;128mâœ“[0m --help flag works

[1mError Handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits non-zero
  [38;2;74;222;128mâœ“[0m unknown command mentions error

[1mReview Subcommand[0m
  [38;2;74;222;128mâœ“[0m review warns when disabled
  [38;2;74;222;128mâœ“[0m review returns empty JSON array when disabled

[1mAddress Subcommand[0m
  [38;2;74;222;128mâœ“[0m address with no objections succeeds
  [38;2;74;222;128mâœ“[0m address returns empty JSON

[1mPersona Definitions[0m
  [38;2;74;222;128mâœ“[0m security persona defined
  [38;2;74;222;128mâœ“[0m performance persona defined
  [38;2;74;222;128mâœ“[0m maintainability persona defined

[1mConfiguration[0m
  [38;2;74;222;128mâœ“[0m SIMULATION_MAX_ROUNDS env var supported
  [38;2;74;222;128mâœ“[0m daemon-config.json checked

[1mEvent Emission[0m
  [38;2;74;222;128mâœ“[0m emits simulation.objection events
  [38;2;74;222;128mâœ“[0m emits simulation.complete events
  [38;2;74;222;128mâœ“[0m emits simulation.addressed events


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 24 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Discovery Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;0;212;255mhelp command[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows commands
  [38;2;74;222;128mâœ“[0m --help exits 0

  [38;2;0;212;255merror handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits 1
  [38;2;74;222;128mâœ“[0m unknown command shows error
  [38;2;74;222;128mâœ“[0m broadcast without args exits 1
  [38;2;74;222;128mâœ“[0m query without args exits 1
  [38;2;74;222;128mâœ“[0m inject without args exits 1

  [38;2;0;212;255mbroadcast subcommand[0m
  [38;2;74;222;128mâœ“[0m broadcast exits 0
  [38;2;74;222;128mâœ“[0m broadcast confirms
  [38;2;74;222;128mâœ“[0m discoveries.jsonl created
  [38;2;74;222;128mâœ“[0m discoveries.jsonl contains valid JSON

  [38;2;0;212;255mquery subcommand[0m
  [38;2;74;222;128mâœ“[0m query exits 0
  [38;2;74;222;128mâœ“[0m query finds discovery
  [38;2;74;222;128mâœ“[0m query non-match exits 0
  [38;2;74;222;128mâœ“[0m query reports no discoveries

  [38;2;0;212;255mstatus subcommand[0m
  [38;2;74;222;128mâœ“[0m status exits 0
  [38;2;74;222;128mâœ“[0m status shows total

  [38;2;0;212;255mclean subcommand[0m
  [38;2;74;222;128mâœ“[0m clean exits 0
  [38;2;74;222;128mâœ“[0m clean reports result

  [38;2;0;212;255minject subcommand[0m
  [38;2;74;222;128mâœ“[0m inject exits 0

  [38;2;0;212;255minternal patterns_overlap[0m
  [38;2;74;222;128mâœ“[0m patterns_overlap matches same pattern
  [38;2;74;222;128mâœ“[0m patterns_overlap rejects different paths

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 24 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Doc Fleet Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Help[0m
  [38;2;74;222;128mâœ“[0m help shows title
  [38;2;74;222;128mâœ“[0m help shows commands section
  [38;2;74;222;128mâœ“[0m help shows fleet roles section
  [38;2;74;222;128mâœ“[0m help shows examples
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m unknown command shows error
[1m  Roles[0m
  [38;2;74;222;128mâœ“[0m roles lists doc-architect
  [38;2;74;222;128mâœ“[0m roles lists claude-md
  [38;2;74;222;128mâœ“[0m roles lists strategy-curator
  [38;2;74;222;128mâœ“[0m roles lists pattern-writer
  [38;2;74;222;128mâœ“[0m roles lists readme-optimizer
[1m  Audit[0m
  [38;2;74;222;128mâœ“[0m audit shows health header
  [38;2;74;222;128mâœ“[0m audit shows health score
  [38;2;74;222;128mâœ“[0m audit checks doc inventory
  [38;2;74;222;128mâœ“[0m audit checks CLAUDE.md
  [38;2;74;222;128mâœ“[0m audit checks agent roles
  [38;2;74;222;128mâœ“[0m audit creates state file
  [38;2;74;222;128mâœ“[0m audit records health score (91%)
[1m  Launch[0m
  [38;2;74;222;128mâœ“[0m launch dry-run shows header
  [38;2;74;222;128mâœ“[0m launch dry-run mentions dry-run
  [38;2;74;222;128mâœ“[0m launch dry-run lists doc-architect
  [38;2;74;222;128mâœ“[0m launch dry-run lists claude-md
  [38;2;74;222;128mâœ“[0m launch dry-run lists strategy-curator
  [38;2;74;222;128mâœ“[0m launch dry-run lists pattern-writer
  [38;2;74;222;128mâœ“[0m launch dry-run lists readme-optimizer
  [38;2;74;222;128mâœ“[0m launch dry-run shows agent count
  [38;2;74;222;128mâœ“[0m launch specific role shows role
  [38;2;74;222;128mâœ“[0m launch specific role shows 1 agent
  [38;2;74;222;128mâœ“[0m launch invalid role shows error
[1m  Status[0m
  [38;2;74;222;128mâœ“[0m status shows header
  [38;2;74;222;128mâœ“[0m status shows last run
  [38;2;74;222;128mâœ“[0m status shows health score
  [38;2;74;222;128mâœ“[0m status shows session list
[1m  Manifest[0m
  [38;2;74;222;128mâœ“[0m manifest shows generation
  [38;2;74;222;128mâœ“[0m manifest file created
  [38;2;74;222;128mâœ“[0m manifest has documents (16)
[1m  Report[0m
  [38;2;74;222;128mâœ“[0m report shows header
  [38;2;74;222;128mâœ“[0m report shows inventory
  [38;2;74;222;128mâœ“[0m report shows volume
  [38;2;74;222;128mâœ“[0m report shows fleet state
  [38;2;74;222;128mâœ“[0m report json shows JSON
  [38;2;74;222;128mâœ“[0m JSON report file created
[1m  Retire[0m
  [38;2;74;222;128mâœ“[0m retire shows retiring
  [38;2;74;222;128mâœ“[0m retire shows count
[1m  State Persistence[0m
  [38;2;74;222;128mâœ“[0m status shows run count after commands
[1m  Events[0m
  [38;2;74;222;128mâœ“[0m doc_fleet events logged (8 events)
[1m  Aliases[0m
  [38;2;74;222;128mâœ“[0m start alias works
  [38;2;74;222;128mâœ“[0m stop alias works

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 48 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Docs Agent Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Help[0m
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows commands
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m unknown command shows error
[1m  Coverage[0m
  [38;2;74;222;128mâœ“[0m coverage shows header
  [38;2;74;222;128mâœ“[0m coverage shows total scripts
[1m  API Reference[0m
  [38;2;74;222;128mâœ“[0m api generation succeeds
  [38;2;74;222;128mâœ“[0m api file has title
[1m  Wiki[0m
  [38;2;74;222;128mâœ“[0m wiki generation succeeds
  [38;2;74;222;128mâœ“[0m wiki directory created
[1m  Scan[0m
  [38;2;74;222;128mâœ“[0m scan shows scanning
[1m  Sync[0m
  [38;2;74;222;128mâœ“[0m sync shows sync complete
[1m  Impact[0m
  [38;2;74;222;128mâœ“[0m impact shows analysis
[1m  State[0m
  [38;2;74;222;128mâœ“[0m docs-agent home directory exists

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 14 tests passed[0m


[38;2;0;212;255m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;0;212;255m[1mâ•‘  shipwright docs â€” Test Suite                     â•‘[0m
[38;2;0;212;255m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m

[38;2;124;58;237m[1mAUTO Section Discovery[0m
  [38;2;0;212;255mâ–¸[0m find_auto_files discovers CLAUDE.md... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m get_sections extracts section IDs... [38;2;74;222;128mPASS[0m

[38;2;124;58;237m[1mSection Generators[0m
  [38;2;0;212;255mâ–¸[0m Architecture table has headers and scripts... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m Architecture table includes CLI router... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m Feature flags table with intelligence config... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m Test suites table picks up test files... [38;2;74;222;128mPASS[0m

[38;2;124;58;237m[1mSection Check & Replace[0m
  [38;2;0;212;255mâ–¸[0m check_section detects fresh vs stale... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m replace_section updates content between markers... [38;2;74;222;128mPASS[0m

[38;2;124;58;237m[1mSubcommands[0m
  [38;2;0;212;255mâ–¸[0m docs check returns 1 when stale... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m docs sync then check returns 0 (fresh)... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m docs sync is idempotent... [38;2;74;222;128mPASS[0m

[38;2;124;58;237m[1mCLI & Help[0m
  [38;2;0;212;255mâ–¸[0m Help output contains all subcommands... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m Unknown command exits with error... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m Default (no args) shows help... [38;2;74;222;128mPASS[0m

[38;2;124;58;237m[1mEdge Cases[0m
  [38;2;0;212;255mâ–¸[0m No AUTO markers returns 0... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m Multiple sections all get processed... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m Purpose extracted from script headers... [38;2;74;222;128mPASS[0m
  [38;2;0;212;255mâ–¸[0m Wiki dry-run succeeds... [38;2;74;222;128mPASS[0m

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m
  [38;2;74;222;128m[1m18 passed[0m  [38;2;248;113;113m[1m0 failed[0m  [2m(18 total)[0m


[38;2;0;212;255m[1m  Shipwright Doctor Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2m  execution[0m
  [38;2;74;222;128mâœ“[0m doctor runs without crash
  [38;2;74;222;128mâœ“[0m output shows PREREQUISITES
  [38;2;74;222;128mâœ“[0m detects tmux
  [38;2;74;222;128mâœ“[0m detects jq
  [38;2;74;222;128mâœ“[0m detects Claude Code CLI
  [38;2;74;222;128mâœ“[0m detects git

[2m  structure[0m
  [38;2;74;222;128mâœ“[0m VERSION variable defined
  [38;2;74;222;128mâœ“[0m Uses set -euo pipefail
  [38;2;74;222;128mâœ“[0m ERR trap is set
  [38;2;74;222;128mâœ“[0m check_pass helper defined
  [38;2;74;222;128mâœ“[0m check_fail helper defined
  [38;2;74;222;128mâœ“[0m output shows Shipwright header

[2m  check logic for tools[0m
  [38;2;74;222;128mâœ“[0m Source checks for tmux
  [38;2;74;222;128mâœ“[0m Source checks for jq
  [38;2;74;222;128mâœ“[0m Source checks for Claude CLI
  [38;2;74;222;128mâœ“[0m Source checks for git
  [38;2;74;222;128mâœ“[0m Source checks for gh

[2m  version flag[0m
  [38;2;74;222;128mâœ“[0m --version outputs sw-doctor and version
  [38;2;74;222;128mâœ“[0m -V short flag works

[2m  missing tool handling[0m
  [38;2;74;222;128mâœ“[0m Doctor reports when jq missing from PATH
  [38;2;74;222;128mâœ“[0m output includes PREREQUISITES section
  [38;2;74;222;128mâœ“[0m output includes INSTALLED FILES section

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 22 tests passed[0m


[38;2;0;212;255m[1m  shipwright dora test[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1mScript Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present
  [38;2;74;222;128mâœ“[0m source guard uses if/then/fi pattern

[1mVersion[0m
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[1mHelp Output[0m
  [38;2;74;222;128mâœ“[0m help contains USAGE
  [38;2;74;222;128mâœ“[0m help contains show subcommand
  [38;2;74;222;128mâœ“[0m help contains dx subcommand
  [38;2;74;222;128mâœ“[0m help contains ai subcommand
  [38;2;74;222;128mâœ“[0m help contains trends subcommand
  [38;2;74;222;128mâœ“[0m help contains compare subcommand
  [38;2;74;222;128mâœ“[0m help contains export subcommand
  [38;2;74;222;128mâœ“[0m help contains DORA BANDS
  [38;2;74;222;128mâœ“[0m --help flag works

[1mError Handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits non-zero
  [38;2;74;222;128mâœ“[0m unknown command error message

[1mShow Subcommand (no events)[0m
  [38;2;74;222;128mâœ“[0m show displays DORA Metrics
  [38;2;74;222;128mâœ“[0m show displays Deploy Frequency
  [38;2;74;222;128mâœ“[0m show displays Lead Time
  [38;2;74;222;128mâœ“[0m show displays Change Failure Rate
  [38;2;74;222;128mâœ“[0m show displays MTTR

[1mDX Subcommand[0m
  [38;2;74;222;128mâœ“[0m dx displays Developer Experience

[1mAI Subcommand[0m
  [38;2;74;222;128mâœ“[0m ai displays AI Performance Metrics

[1mExport Subcommand[0m
  [38;2;74;222;128mâœ“[0m export produces JSON with timestamp
  [38;2;74;222;128mâœ“[0m export contains current_period
  [38;2;74;222;128mâœ“[0m export contains previous_period

[1mTrends Subcommand[0m
  [38;2;74;222;128mâœ“[0m trends displays Trends heading

[1mCompare Subcommand[0m
  [38;2;74;222;128mâœ“[0m compare displays Period Comparison

[1mDORA Band Classification[0m
  [38;2;74;222;128mâœ“[0m classify_band function defined
  [38;2;74;222;128mâœ“[0m Elite band classification
  [38;2;74;222;128mâœ“[0m High band classification
  [38;2;74;222;128mâœ“[0m Medium band classification
  [38;2;74;222;128mâœ“[0m Low band classification

[1mTrend Arrows[0m
  [38;2;74;222;128mâœ“[0m trend_arrow function defined


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 33 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Durable Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2m  help / version[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows USAGE
  [38;2;74;222;128mâœ“[0m help mentions publish
  [38;2;74;222;128mâœ“[0m help mentions consume
  [38;2;74;222;128mâœ“[0m help mentions checkpoint
  [38;2;74;222;128mâœ“[0m help mentions lock
  [38;2;74;222;128mâœ“[0m help mentions compact
  [38;2;74;222;128mâœ“[0m help mentions status
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[2m  publish events[0m
  [38;2;74;222;128mâœ“[0m publish exits 0
  [38;2;74;222;128mâœ“[0m WAL file created
  [38;2;74;222;128mâœ“[0m Event written to WAL

[2m  error handling[0m
  [38;2;74;222;128mâœ“[0m publish without args exits non-zero
  [38;2;74;222;128mâœ“[0m Unknown command exits non-zero

[2m  status command[0m
  [38;2;74;222;128mâœ“[0m status exits 0

[2m  checkpointing[0m
  [38;2;74;222;128mâœ“[0m checkpoint save exits 0
  [38;2;74;222;128mâœ“[0m Checkpoint file created
  [38;2;74;222;128mâœ“[0m checkpoint restore exits 0

[2m  distributed locks[0m
  [38;2;74;222;128mâœ“[0m lock acquire exits 0
  [38;2;74;222;128mâœ“[0m lock release exits 0

[2m  script safety[0m
  [38;2;74;222;128mâœ“[0m Uses set -euo pipefail
  [38;2;74;222;128mâœ“[0m Has source guard pattern

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 22 tests passed[0m


[38;2;0;212;255m[1m  Shipwright E2E Orchestrator Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;74;222;128mâœ“[0m help shows usage text
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m unknown command exits nonzero
  [38;2;74;222;128mâœ“[0m registry file created on init
  [38;2;74;222;128mâœ“[0m registry is valid JSON
  [38;2;74;222;128mâœ“[0m registry has >= 3 default suites
  [38;2;74;222;128mâœ“[0m register adds suite
  [38;2;74;222;128mâœ“[0m duplicate register fails
  [38;2;74;222;128mâœ“[0m quarantine adds test
  [38;2;74;222;128mâœ“[0m quarantine list has entry
  [38;2;74;222;128mâœ“[0m report handles no results
  [38;2;74;222;128mâœ“[0m flaky handles no history

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 13 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Eventbus Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;0;212;255mhelp command[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows subcommands
  [38;2;74;222;128mâœ“[0m --help exits 0

  [38;2;0;212;255merror handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits 1
  [38;2;74;222;128mâœ“[0m unknown command shows error

  [38;2;0;212;255mstatus subcommand[0m
  [38;2;74;222;128mâœ“[0m status exits 0 with empty bus
  [38;2;74;222;128mâœ“[0m status shows title

  [38;2;0;212;255mpublish subcommand[0m
  [38;2;74;222;128mâœ“[0m publish exits 0
  [38;2;74;222;128mâœ“[0m publish confirms
  [38;2;74;222;128mâœ“[0m events.jsonl created
  [38;2;74;222;128mâœ“[0m events.jsonl contains published event type
  [38;2;74;222;128mâœ“[0m events.jsonl contains correlation_id
  [38;2;74;222;128mâœ“[0m eventbus has 3+ events after multi-publish

  [38;2;0;212;255mstatus with events[0m
  [38;2;74;222;128mâœ“[0m status with events exits 0
  [38;2;74;222;128mâœ“[0m status shows total events
  [38;2;74;222;128mâœ“[0m status shows events by type

  [38;2;0;212;255mclean subcommand[0m
  [38;2;74;222;128mâœ“[0m clean exits 0
  [38;2;74;222;128mâœ“[0m clean reports result

  [38;2;0;212;255mreplay subcommand[0m
  [38;2;74;222;128mâœ“[0m replay exits 0
  [38;2;74;222;128mâœ“[0m replay shows replaying

  [38;2;0;212;255mpublish error handling[0m
  [38;2;74;222;128mâœ“[0m publish with empty type exits 1
  [38;2;74;222;128mâœ“[0m watch with missing dir exits 1
  [38;2;74;222;128mâœ“[0m watch shows dir error

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 24 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Feedback Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;0;212;255mhelp command[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows subcommands
  [38;2;74;222;128mâœ“[0m --help exits 0

  [38;2;0;212;255merror handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits 1
  [38;2;74;222;128mâœ“[0m unknown command shows error

  [38;2;0;212;255mcollect subcommand[0m
  [38;2;74;222;128mâœ“[0m collect on empty dir exits 0
  [38;2;74;222;128mâœ“[0m collect shows collecting
  [38;2;74;222;128mâœ“[0m collect shows save path

  [38;2;0;212;255mcollect with error log[0m
  [38;2;74;222;128mâœ“[0m collect with errors exits 0
  [38;2;74;222;128mâœ“[0m collect reports errors

  [38;2;0;212;255manalyze subcommand[0m
  [38;2;74;222;128mâœ“[0m analyze missing file exits 1
  [38;2;74;222;128mâœ“[0m analyze shows not found
  [38;2;74;222;128mâœ“[0m analyze exits 0
  [38;2;74;222;128mâœ“[0m analyze shows report

  [38;2;0;212;255mlearn subcommand[0m
  [38;2;74;222;128mâœ“[0m learn exits 0
  [38;2;74;222;128mâœ“[0m learn confirms capture
  [38;2;74;222;128mâœ“[0m incidents.jsonl created
  [38;2;74;222;128mâœ“[0m incidents.jsonl has valid JSONL

  [38;2;0;212;255mreport subcommand[0m
  [38;2;74;222;128mâœ“[0m report exits 0
  [38;2;74;222;128mâœ“[0m report shows incidents
  [38;2;74;222;128mâœ“[0m report shows total
  [38;2;74;222;128mâœ“[0m report no incidents exits 0
  [38;2;74;222;128mâœ“[0m report says no incidents

  [38;2;0;212;255mcreate-issue subcommand[0m
  [38;2;74;222;128mâœ“[0m create-issue with NO_GITHUB exits 0
  [38;2;74;222;128mâœ“[0m create-issue skips with NO_GITHUB

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 26 tests passed[0m


[38;2;124;58;237m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;124;58;237m[1mâ•‘  shipwright fix test â€” Unit Tests                                  â•‘[0m
[38;2;124;58;237m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m
[38;2;74;222;128mâœ“[0m Environment ready: [2m/tmp/sw-fix-test.L775Nm[0m

  [38;2;0;212;255mâ–¸[0m Help output contains expected sections... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Help via --help flag... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Missing goal shows error... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Missing repos shows error... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Arg parsing â€” --repos comma-separated... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Arg parsing â€” --repos-from file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Arg parsing â€” --repos-from missing file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Arg parsing â€” --pipeline template... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Arg parsing â€” --max-parallel... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Arg parsing â€” --branch-prefix... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Dry run shows what would happen... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Dry run does not create state file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fix status â€” no sessions... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fix status shows existing sessions... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Invalid repo directory shows error... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fix start creates state file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fix start emits events... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fix start â€” summary output... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Branch name sanitization... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fix header shows configuration... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Non-git repo warning... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Per-repo event tracking... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mâ”â”â” Results â”â”â”[0m
  [38;2;74;222;128mPassed:[0m 22
  [38;2;248;113;113mFailed:[0m 0
  [2mTotal:[0m  22

[38;2;74;222;128m[1mAll 22 tests passed![0m


[38;2;0;212;255m[1m  shipwright fleet-discover test[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1mScript Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present
  [38;2;74;222;128mâœ“[0m source guard uses if/then/fi pattern

[1mVersion[0m
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[1mHelp Output[0m
  [38;2;74;222;128mâœ“[0m help contains USAGE
  [38;2;74;222;128mâœ“[0m help contains --org option
  [38;2;74;222;128mâœ“[0m help contains --language option
  [38;2;74;222;128mâœ“[0m help contains --dry-run option
  [38;2;74;222;128mâœ“[0m help contains --json option
  [38;2;74;222;128mâœ“[0m help contains --topic option
  [38;2;74;222;128mâœ“[0m help contains --exclude-topic option
  [38;2;74;222;128mâœ“[0m help contains --min-activity-days

[1mArgument Validation[0m
  [38;2;74;222;128mâœ“[0m missing --org exits non-zero
  [38;2;74;222;128mâœ“[0m missing --org error message

[1mError Handling[0m
  [38;2;74;222;128mâœ“[0m unknown option exits non-zero
  [38;2;74;222;128mâœ“[0m unknown option error

[1mNO_GITHUB Check[0m
  [38;2;74;222;128mâœ“[0m NO_GITHUB blocks discovery
  [38;2;74;222;128mâœ“[0m NO_GITHUB shows error

[1mArgument Parsing[0m
  [38;2;74;222;128mâœ“[0m supports --org=value syntax
  [38;2;74;222;128mâœ“[0m supports --config=value syntax
  [38;2;74;222;128mâœ“[0m supports --language=value syntax
  [38;2;74;222;128mâœ“[0m supports --topic=value syntax

[1mConfig Merge[0m
  [38;2;74;222;128mâœ“[0m merge added new repo
  [38;2;74;222;128mâœ“[0m merge preserved existing repo

[1mFilter Logic[0m
  [38;2;74;222;128mâœ“[0m filters archived repos
  [38;2;74;222;128mâœ“[0m filters disabled repos
  [38;2;74;222;128mâœ“[0m checks has_issues
  [38;2;74;222;128mâœ“[0m language filter applied
  [38;2;74;222;128mâœ“[0m topic filter applied
  [38;2;74;222;128mâœ“[0m exclude topic filter
  [38;2;74;222;128mâœ“[0m checks .shipwright-ignore

[1mEvent Emission[0m
  [38;2;74;222;128mâœ“[0m emits fleet.discover.completed event
  [38;2;74;222;128mâœ“[0m emits fleet.discover.merged event


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 33 tests passed[0m


[38;2;124;58;237m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;124;58;237m[1mâ•‘  shipwright fleet test â€” Unit Tests                                â•‘[0m
[38;2;124;58;237m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m
[38;2;74;222;128mâœ“[0m Environment ready: [2m/tmp/sw-fleet-test.dqCC6d[0m

  [38;2;0;212;255mâ–¸[0m Help output contains expected sections... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Help via --help flag... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Config parsing â€” valid config... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Config parsing â€” missing config file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Config parsing â€” invalid JSON... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Config parsing â€” empty repos array... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Config defaults applied... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet init generates config template... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet init skips when config exists... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet start spawns tmux sessions per repo... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet start skips missing repos... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet start skips existing sessions... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet start creates fleet state file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet start emits fleet.started event... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet start applies repo-level overrides... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet stop kills sessions and cleans state... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet stop â€” no fleet running... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet stop emits fleet.stopped event... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet status â€” no fleet running... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet status shows dashboard... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet metrics â€” no events file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet metrics dashboard output... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet metrics JSON output... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet metrics period flag... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Session name generation... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fleet start skips non-git repos... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Unknown subcommand... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mâ”â”â” Results â”â”â”[0m
  [38;2;74;222;128mPassed:[0m 27
  [38;2;248;113;113mFailed:[0m 0
  [2mTotal:[0m  27

[38;2;74;222;128m[1mAll 27 tests passed![0m


[38;2;0;212;255m[1m  shipwright fleet-viz test[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1mScript Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present
  [38;2;74;222;128mâœ“[0m source guard uses if/then/fi pattern

[1mVersion[0m
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[1mHelp Output[0m
  [38;2;74;222;128mâœ“[0m help contains USAGE
  [38;2;74;222;128mâœ“[0m help contains overview subcommand
  [38;2;74;222;128mâœ“[0m help contains workers subcommand
  [38;2;74;222;128mâœ“[0m help contains insights subcommand
  [38;2;74;222;128mâœ“[0m help contains queue subcommand
  [38;2;74;222;128mâœ“[0m help contains costs subcommand
  [38;2;74;222;128mâœ“[0m help contains export subcommand
  [38;2;74;222;128mâœ“[0m --help flag works

[1mError Handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits non-zero
  [38;2;74;222;128mâœ“[0m unknown command error message

[1mOverview Subcommand[0m
  [38;2;74;222;128mâœ“[0m overview shows Fleet Overview
  [38;2;74;222;128mâœ“[0m overview shows Active count
  [38;2;74;222;128mâœ“[0m overview shows Queued count
  [38;2;74;222;128mâœ“[0m overview shows Repos count

[1mWorkers Subcommand[0m
  [38;2;74;222;128mâœ“[0m workers shows Worker Allocation
  [38;2;74;222;128mâœ“[0m workers shows Remote Machines

[1mQueue Subcommand[0m
  [38;2;74;222;128mâœ“[0m queue shows Issue Queue
  [38;2;74;222;128mâœ“[0m queue shows queued items

[1mCosts Subcommand[0m
  [38;2;74;222;128mâœ“[0m costs shows Fleet Costs
  [38;2;74;222;128mâœ“[0m costs shows Total Spend
  [38;2;74;222;128mâœ“[0m costs shows Per-Repo
  [38;2;74;222;128mâœ“[0m costs shows Per-Model

[1mExport Subcommand[0m
  [38;2;74;222;128mâœ“[0m export produces JSON with active_jobs

[1mInsights Subcommand[0m
  [38;2;74;222;128mâœ“[0m insights shows Fleet Insights
  [38;2;74;222;128mâœ“[0m insights shows Success Rate

[1mDefault Command[0m
  [38;2;74;222;128mâœ“[0m default command shows Fleet Overview

[1mHealth Helpers[0m
  [38;2;74;222;128mâœ“[0m get_health_status function defined
  [38;2;74;222;128mâœ“[0m color_health function defined
  [38;2;74;222;128mâœ“[0m healthy status handled
  [38;2;74;222;128mâœ“[0m degraded status handled
  [38;2;74;222;128mâœ“[0m failing status handled


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 35 tests passed[0m


[38;2;0;212;255m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;0;212;255m[1mâ•‘  shipwright frontier â€” Test Suite                 â•‘[0m
[38;2;0;212;255m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m

[38;2;124;58;237m[1mAdversarial Review[0m
  [38;2;0;212;255mâ–¸[0m Adversarial review produces structured findings... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Adversarial iteration converges on no critical findings... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mDeveloper Simulation[0m
  [38;2;0;212;255mâ–¸[0m Simulation generates objections from 3 personas... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Simulation address returns action items... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mArchitecture Enforcer[0m
  [38;2;0;212;255mâ–¸[0m Architecture model has valid schema... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Architecture validates changes (violation detected)... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mGraceful Degradation[0m
  [38;2;0;212;255mâ–¸[0m All three degrade gracefully when claude unavailable... [38;2;74;222;128mâœ“[0m

[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[38;2;74;222;128m[1m  All 7 tests passed âœ“[0m
[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


[38;2;0;212;255m[1m  Shipwright GitHub App Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Help[0m
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows commands
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m unknown command shows error
[1m  Status[0m
  [38;2;74;222;128mâœ“[0m status without config warns
[1m  Events[0m
  [38;2;74;222;128mâœ“[0m events with no log warns
[1m  Manifest[0m
  [38;2;74;222;128mâœ“[0m manifest contains app name
  [38;2;74;222;128mâœ“[0m manifest contains webhook URL
  [38;2;74;222;128mâœ“[0m manifest success message
  [38;2;74;222;128mâœ“[0m manifest output is valid JSON
[1m  Configured Status[0m
  [38;2;74;222;128mâœ“[0m configured status shows app ID
  [38;2;74;222;128mâœ“[0m configured status shows install ID
  [38;2;74;222;128mâœ“[0m events shows recent events
[1m  Token[0m
  [38;2;74;222;128mâœ“[0m token without key file errors
[1m  Verify[0m
  [38;2;74;222;128mâœ“[0m verify without secret errors

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 15 tests passed[0m


[38;2;0;212;255m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;0;212;255m[1mâ•‘  shipwright github-checks â€” Test Suite            â•‘[0m
[38;2;0;212;255m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m

[38;2;124;58;237m[1mChecks API Availability[0m
  [38;2;0;212;255mâ–¸[0m _gh_checks_available: returns true when API accessible... {"check_runs":[],"total_count":0}
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m _gh_checks_available: returns false on 403... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mCheck Run CRUD[0m
  [38;2;0;212;255mâ–¸[0m gh_checks_create_run: returns run ID from response... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_checks_create_run: handles 403 gracefully... [38;2;250;204;21m[1mâš [0m Failed to create check run 'test-check' (API returned 1)
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_checks_update_run: sends correct PATCH request... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_checks_update_run: skips when run_id empty... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_checks_annotate: respects 50-annotation limit... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_checks_list_runs: parses response correctly... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_checks_complete: convenience wrapper works... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mPipeline Integration[0m
  [38;2;0;212;255mâ–¸[0m gh_checks_pipeline_start: creates runs for all stages... WARN: Unknown event type 'checks.create' â€” update config/event-schema.json
WARN: Unknown event type 'checks.create' â€” update config/event-schema.json
WARN: Unknown event type 'checks.create' â€” update config/event-schema.json
WARN: Unknown event type 'checks.pipeline_start' â€” update config/event-schema.json
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_checks_stage_update: looks up stored run IDs... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mNO_GITHUB Guard[0m
  [38;2;0;212;255mâ–¸[0m NO_GITHUB: all functions return early... [38;2;74;222;128mâœ“[0m

[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[38;2;74;222;128m[1m  All 12 tests passed âœ“[0m
[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


[38;2;0;212;255m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;0;212;255m[1mâ•‘  shipwright github-deploy â€” Test Suite            â•‘[0m
[38;2;0;212;255m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m

[38;2;124;58;237m[1mDeployment CRUD[0m
  [38;2;0;212;255mâ–¸[0m gh_deploy_create: returns deployment ID... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_deploy_create: handles 403 gracefully... [38;2;250;204;21m[1mâš [0m Failed to create deployment for ref 'main' to 'production' (API returned 1)
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_deploy_update_status: sends correct POST... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_deploy_update_status: skips when deploy_id empty... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_deploy_list: parses deployment list... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_deploy_latest: returns first result... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mRollback[0m
  [38;2;0;212;255mâ–¸[0m gh_deploy_rollback: creates new deployment with prev ref... [38;2;0;212;255m[1mâ–¸[0m Rolling back to ref: v2.9
[38;2;74;222;128m[1mâœ“[0m Rolled back to v2.9 (deployment 301)
[38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mPipeline Integration[0m
  [38;2;0;212;255mâ–¸[0m gh_deploy_pipeline_start: stores deployment ID... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m gh_deploy_pipeline_complete: updates status correctly... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mNO_GITHUB Guard[0m
  [38;2;0;212;255mâ–¸[0m NO_GITHUB: all functions return early... [38;2;74;222;128mâœ“[0m

[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[38;2;74;222;128m[1m  All 10 tests passed âœ“[0m
[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


[38;2;124;58;237m[1mâ”â”â” shipwright github-graphql tests â”â”â”[0m

  â–¸ Fresh cache returns cached data... âœ“
  â–¸ Stale cache returns miss... âœ“
  â–¸ Atomic writes leave no temp files... âœ“
  â–¸ gh_file_change_frequency returns count... WARN: Unknown event type 'github.cache_miss' â€” update config/event-schema.json
âœ“
  â–¸ gh_contributors returns parsed list... WARN: Unknown event type 'github.cache_miss' â€” update config/event-schema.json
âœ“
  â–¸ gh_similar_issues truncates long text... WARN: Unknown event type 'github.cache_miss' â€” update config/event-schema.json
âœ“
  â–¸ gh_branch_protection handles 404... âœ“
  â–¸ gh_security_alerts handles 403... âœ“
  â–¸ gh_dependabot_alerts handles 403... âœ“
  â–¸ gh_repo_context aggregates data... âœ“
  â–¸ NO_GITHUB returns defaults... âœ“
  â–¸ _gh_detect_repo parses SSH URL... âœ“
  â–¸ _gh_detect_repo parses HTTPS URL... âœ“
  â–¸ _gh_detect_repo parses HTTPS without .git... âœ“
  â–¸ gh_codeowners parses CODEOWNERS file... WARN: Unknown event type 'github.cache_miss' â€” update config/event-schema.json
âœ“
  â–¸ Cache clear removes all files... âœ“
  â–¸ gh_commit_history returns parsed commits... WARN: Unknown event type 'github.cache_miss' â€” update config/event-schema.json
âœ“
  â–¸ gh_blame_data aggregates authors... WARN: Unknown event type 'github.cache_miss' â€” update config/event-schema.json
âœ“
  â–¸ gh_actions_runs calculates duration... WARN: Unknown event type 'github.cache_miss' â€” update config/event-schema.json
âœ“
  â–¸ Events emitted for cache hit/miss... WARN: Unknown event type 'github.cache_miss' â€” update config/event-schema.json
âœ“

â”â”â” Results â”â”â”
  Passed: 20
  Failed: 0
  Total:  20

All 20 tests passed!


[38;2;0;212;255m[1m  Shipwright Guild Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;74;222;128mâœ“[0m help shows usage text
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m no args shows help
  [38;2;74;222;128mâœ“[0m list shows Available Guilds
  [38;2;74;222;128mâœ“[0m guild config.json created
  [38;2;74;222;128mâœ“[0m guild config is valid JSON
  [38;2;74;222;128mâœ“[0m guilds.json data file created
  [38;2;74;222;128mâœ“[0m show security guild
  [38;2;74;222;128mâœ“[0m show invalid guild exits nonzero
  [38;2;74;222;128mâœ“[0m show without name exits nonzero
  [38;2;74;222;128mâœ“[0m add pattern succeeds
  [38;2;74;222;128mâœ“[0m pattern saved in data file
  [38;2;74;222;128mâœ“[0m report shows guild data
  [38;2;74;222;128mâœ“[0m report for specific guild
  [38;2;74;222;128mâœ“[0m inject security shows knowledge
  [38;2;74;222;128mâœ“[0m unknown command exits nonzero

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 17 tests passed[0m


[38;2;0;212;255m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;0;212;255m[1mâ•‘  shipwright heartbeat + checkpoint â€” Test Suite   â•‘[0m
[38;2;0;212;255m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m

[38;2;124;58;237m[1mHeartbeat Lifecycle[0m
  [38;2;0;212;255mâ–¸[0m Write heartbeat creates JSON file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Check heartbeat reports alive... [38;2;74;222;128m[1mâœ“[0m Job test-job-alive alive (0s ago)
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Check heartbeat reports stale... [38;2;250;204;21m[1mâš [0m Job test-job-stale stale (194216200s ago, timeout: 120s)
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Clear heartbeat removes file... [38;2;74;222;128m[1mâœ“[0m Cleared heartbeat for job: test-job-clear
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m List heartbeats returns JSON array... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Heartbeat update overwrites existing... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Check missing heartbeat returns error... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Heartbeat dir auto-created when missing... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mCheckpoint Lifecycle[0m
  [38;2;0;212;255mâ–¸[0m Checkpoint save creates JSON file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Checkpoint restore outputs JSON... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Checkpoint restore missing stage fails... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Checkpoint clear removes file... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Checkpoint clear --all removes all... [38;2;74;222;128m[1mâœ“[0m Cleared 2 checkpoint(s)
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Checkpoint save with files-modified... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mIntegration[0m
  [38;2;0;212;255mâ–¸[0m Pipeline script has heartbeat functions... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Loop script has heartbeat and checkpoint... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline has human intervention checks... [38;2;74;222;128mâœ“[0m

[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[38;2;74;222;128m[1m  All 17 tests passed âœ“[0m
[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


[38;2;0;212;255m[1m  Shipwright Hygiene Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;0;212;255mhelp command[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows subcommands
  [38;2;74;222;128mâœ“[0m --help exits 0

  [38;2;0;212;255merror handling[0m
  [38;2;74;222;128mâœ“[0m unknown subcommand exits 1
  [38;2;74;222;128mâœ“[0m unknown subcommand shows error

  [38;2;0;212;255mreport subcommand[0m
  [38;2;74;222;128mâœ“[0m report exits 0
  [38;2;74;222;128mâœ“[0m report shows generating
  [38;2;74;222;128mâœ“[0m report exits 0
  [38;2;74;222;128mâœ“[0m report creates JSON file
  [38;2;74;222;128mâœ“[0m report JSON is valid
  [38;2;74;222;128mâœ“[0m report JSON has timestamp
  [38;2;74;222;128mâœ“[0m report JSON has sections

  [38;2;0;212;255mstructure subcommand[0m
  [38;2;74;222;128mâœ“[0m structure exits 0
  [38;2;74;222;128mâœ“[0m structure reports validating

  [38;2;0;212;255mnaming subcommand[0m
  [38;2;74;222;128mâœ“[0m naming exits 0
  [38;2;74;222;128mâœ“[0m naming shows checking

  [38;2;0;212;255mdead-code subcommand[0m
  [38;2;74;222;128mâœ“[0m dead-code exits 0
  [38;2;74;222;128mâœ“[0m dead-code shows scanning
  [38;2;74;222;128mâœ“[0m dead-code timeout still exits 0
  [38;2;74;222;128mâœ“[0m dead-code timeout warns partial results
  [38;2;74;222;128mâœ“[0m dead-code invalid timeout still exits 0
  [38;2;74;222;128mâœ“[0m dead-code invalid timeout warns and falls back

  [38;2;0;212;255mdependencies subcommand[0m
  [38;2;74;222;128mâœ“[0m dependencies exits 0
  [38;2;74;222;128mâœ“[0m dependencies shows auditing

  [38;2;0;212;255mplatform-refactor subcommand[0m
  [38;2;74;222;128mâœ“[0m platform-refactor exits 0
  [38;2;74;222;128mâœ“[0m platform-refactor scans for hardcoded/fallback
  [38;2;74;222;128mâœ“[0m platform-refactor creates platform-hygiene.json with counts

  [38;2;0;212;255mpolicy read (policy_get from config)[0m
  [38;2;74;222;128mâœ“[0m policy_get returns value from config
  [38;2;74;222;128mâœ“[0m policy_get returns default when key missing

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 30 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Incident Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2m  help / version[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m help shows USAGE
  [38;2;74;222;128mâœ“[0m help mentions watch
  [38;2;74;222;128mâœ“[0m help mentions list
  [38;2;74;222;128mâœ“[0m help mentions report
  [38;2;74;222;128mâœ“[0m help mentions stats
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[2m  error handling[0m
  [38;2;74;222;128mâœ“[0m Unknown command exits non-zero

[2m  list command[0m
  [38;2;74;222;128mâœ“[0m list with no incidents exits 0

[2m  stats command[0m
  [38;2;74;222;128mâœ“[0m stats with no data exits 0

[2m  state management[0m
  [38;2;74;222;128mâœ“[0m Incident config created
  [38;2;74;222;128mâœ“[0m Incident config is valid JSON

[2m  script safety[0m
  [38;2;74;222;128mâœ“[0m Uses set -euo pipefail
  [38;2;74;222;128mâœ“[0m Has source guard pattern
  [38;2;74;222;128mâœ“[0m ERR trap is set

[2m  config subcommand[0m
  [38;2;74;222;128mâœ“[0m config subcommand creates valid JSON config

[2m  subcommand usage[0m
ERROR: scripts/sw-incident-test.sh:223 exited with status 1
  [38;2;74;222;128mâœ“[0m show subcommand fails or shows usage when missing args
  [38;2;74;222;128mâœ“[0m report subcommand shows usage when missing args

[2m  detect_pipeline_failures[0m
  [38;2;74;222;128mâœ“[0m detect_pipeline_failures defined and callable
  [38;2;74;222;128mâœ“[0m report with nonexistent incident handles gracefully
  [38;2;74;222;128mâœ“[0m gap list subcommand produces expected output

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 21 tests passed[0m


[38;2;0;212;255m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;0;212;255m[1mâ•‘  shipwright init â€” E2E Test Suite                 â•‘[0m
[38;2;0;212;255m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up sandboxed environment...[0m
[2mTemp dir: /tmp/sw-init-test.c6cfP0[0m

[38;2;124;58;237m[1mConfiguration[0m
  [38;2;0;212;255mâ–¸[0m Settings.json created with agent teams... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Settings merge preserves existing vars... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m tmux.conf installed... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Overlay installed... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mTemplates[0m
  [38;2;0;212;255mâ–¸[0m Team templates installed (>= 10)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pipeline templates installed (>= 5)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Legacy templates path populated... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mRobustness[0m
  [38;2;0;212;255mâ–¸[0m Idempotency â€” double init safe... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Doctor runs at end... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Help flag... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mHook Wiring[0m
  [38;2;0;212;255mâ–¸[0m JSONC stripped from settings.json... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Hooks wired into settings.json... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Hook wiring preserves existing hooks... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m SessionStart hook installed... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Hook wiring with pre-existing settings... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mRepair & Cleanup[0m
  [38;2;0;212;255mâ–¸[0m Legacy overlay cleanup... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Legacy overlay source-file reference stripped... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Repair mode forces clean reinstall... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Plugin direct-clone fallback (outside tmux)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Post-install verification... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m tmux adapter deployed... [38;2;74;222;128mâœ“[0m

[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[38;2;74;222;128m[1m  All 21 tests passed âœ“[0m
[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


[38;2;0;212;255m[1m  Shipwright Instrument Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Help & Version[0m
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows commands
  [38;2;74;222;128mâœ“[0m help shows start
  [38;2;74;222;128mâœ“[0m help shows record
  [38;2;74;222;128mâœ“[0m help shows version

[1m  Start Command[0m
  [38;2;74;222;128mâœ“[0m start without --run-id exits non-zero
  [38;2;74;222;128mâœ“[0m start without --run-id shows error
  [38;2;74;222;128mâœ“[0m start with --run-id exits 0
  [38;2;74;222;128mâœ“[0m start confirms run ID
  [38;2;74;222;128mâœ“[0m start creates run file
  [38;2;74;222;128mâœ“[0m run file contains correct run_id
  [38;2;74;222;128mâœ“[0m run file contains correct issue

[1m  Record Command[0m
  [38;2;74;222;128mâœ“[0m record exits 0
  [38;2;74;222;128mâœ“[0m record confirms metric
  [38;2;74;222;128mâœ“[0m run file has 1 metric
  [38;2;74;222;128mâœ“[0m record without all args exits non-zero
  [38;2;74;222;128mâœ“[0m record on missing run exits non-zero
  [38;2;74;222;128mâœ“[0m record on missing run shows error

[1m  Stage Start/End[0m
  [38;2;74;222;128mâœ“[0m stage-start exits 0
  [38;2;74;222;128mâœ“[0m stage-start confirms stage
  [38;2;74;222;128mâœ“[0m stage-end exits 0
  [38;2;74;222;128mâœ“[0m stage result recorded

[1m  Finish Command[0m
  [38;2;74;222;128mâœ“[0m finish exits 0
  [38;2;74;222;128mâœ“[0m finish confirms completion
  [38;2;74;222;128mâœ“[0m finish removes active run file
  [38;2;74;222;128mâœ“[0m finish writes to completed JSONL

[1m  Trends & Export[0m
  [38;2;74;222;128mâœ“[0m trends with no data exits 0
  [38;2;74;222;128mâœ“[0m trends with no data warns
  [38;2;74;222;128mâœ“[0m export with no data exits 0
  [38;2;74;222;128mâœ“[0m export with no data warns

[1m  Error Handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits non-zero
  [38;2;74;222;128mâœ“[0m unknown command shows error
  [38;2;74;222;128mâœ“[0m events.jsonl created from instrument operations

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 33 tests passed[0m


[38;2;124;58;237m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;124;58;237m[1mâ•‘  shipwright intelligence test â€” Unit Tests                       â•‘[0m
[38;2;124;58;237m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m
âœ“ Environment ready: /tmp/sw-intelligence-test.IDZ2Iw

  â–¸ analyze_issue returns valid schema... âœ“
  â–¸ Cache hit on second call with same input... WARN: Unknown event type 'intelligence.cache_hit' â€” update config/event-schema.json
âœ“
  â–¸ Graceful degradation when claude CLI unavailable... âœ“
  â–¸ compose_pipeline produces valid pipeline JSON... âœ“
  â–¸ recommend_model returns valid model names... WARN: Unknown event type 'intelligence.model' â€” update config/event-schema.json
WARN: Unknown event type 'intelligence.model' â€” update config/event-schema.json
WARN: Unknown event type 'intelligence.model' â€” update config/event-schema.json
WARN: Unknown event type 'intelligence.model' â€” update config/event-schema.json
âœ“
  â–¸ predict_cost returns numeric estimates... WARN: Unknown event type 'intelligence.prediction' â€” update config/event-schema.json
âœ“
  â–¸ Cache TTL expiry returns miss... scripts/sw-intelligence-test.sh: line 344: _intelligence_md5: command not found
âœ“
  â–¸ search_memory returns ranked results... âœ“
  â–¸ Feature flag disabled returns fallback...     âœ— Expected 'intelligence_disabled', got 'null' (returns intelligence_disabled error)
âœ“
  â–¸ Events emitted for analysis... âœ“
  â–¸ recommend_model emits events... WARN: Unknown event type 'intelligence.model' â€” update config/event-schema.json
âœ“
  â–¸ Cache init creates file if missing... âœ“

â”â”â” Results â”â”â”
  Passed: 12
  Failed: 0
  Total:  12

All 12 tests passed!


[38;2;0;212;255m[1m  Shipwright Jira Test Suite[0m
[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

[1m  Script Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present
  [38;2;74;222;128mâœ“[0m VERSION variable defined
  [38;2;74;222;128mâœ“[0m VERSION is semver: 3.1.0

[1m  Help Output[0m
  [38;2;74;222;128mâœ“[0m help mentions USAGE
  [38;2;74;222;128mâœ“[0m help mentions sync command
  [38;2;74;222;128mâœ“[0m help mentions update command
  [38;2;74;222;128mâœ“[0m help mentions status command
  [38;2;74;222;128mâœ“[0m help mentions init command
  [38;2;74;222;128mâœ“[0m help mentions JIRA_BASE_URL
  [38;2;74;222;128mâœ“[0m --help works

[1m  Error Handling[0m

shipwright jira â€” Jira â†” GitHub Bidirectional Sync

USAGE
  shipwright jira <command> [options]

COMMANDS
  sync [--dry-run]              Sync Jira To Do issues â†’ GitHub
  update <issue> <status>       Update linked Jira ticket status
  status                        Show Jira board dashboard
  init                          Configure Jira connection
  help                          Show this help

STATUS VALUES
  started     Pipeline spawned   â†’ Jira: In Progress
  review      PR created         â†’ Jira: In Review
  done        Pipeline complete   â†’ Jira: Done
  failed      Pipeline failed     â†’ Jira: adds failure comment

EXAMPLES
  shipwright jira init                    # Set up Jira connection
  shipwright jira sync                    # Sync To Do â†’ GitHub
  shipwright jira sync --dry-run          # Preview what would sync
  shipwright jira update 42 started       # Mark as In Progress
  shipwright jira update 42 review        # Mark as In Review
  shipwright jira update 42 done          # Mark as Done
  shipwright jira status                  # Show board dashboard

ENVIRONMENT
  JIRA_BASE_URL       Jira instance URL (or use 'jira init' to save)
  JIRA_EMAIL          Account email for authentication
  JIRA_API_TOKEN      API token from Atlassian account
  JIRA_PROJECT_KEY    Jira project key (e.g. PROJ)
  [38;2;74;222;128mâœ“[0m unknown command exits non-zero
  [38;2;74;222;128mâœ“[0m unknown command shows error

[1m  Default Behavior[0m
  [38;2;74;222;128mâœ“[0m no-arg defaults to help

[1m  Configuration[0m
  [38;2;74;222;128mâœ“[0m sync without config shows error
  [38;2;74;222;128mâœ“[0m update without config shows error
  [38;2;74;222;128mâœ“[0m status without config shows error

[1m  Config Loading[0m
  [38;2;74;222;128mâœ“[0m sync with config proceeds

[1m  Update Subcommand[0m
  [38;2;74;222;128mâœ“[0m update without args shows usage

[1m  Notify Integration[0m
  [38;2;74;222;128mâœ“[0m notify subcommand executes without crash

[1m  Atomic Writes[0m
  [38;2;74;222;128mâœ“[0m init uses atomic write (tmp + mv)
  [38;2;74;222;128mâœ“[0m config file gets restricted permissions

[1m  Event Emission[0m
  [38;2;74;222;128mâœ“[0m emits jira events
  [38;2;74;222;128mâœ“[0m uses EVENTS_FILE for event logging


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 24 tests passed[0m


[38;2;0;212;255m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;0;212;255m[1mâ•‘  shipwright launchd + systemd â€” Test Suite       â•‘[0m
[38;2;0;212;255m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m

[38;2;124;58;237m[1mOS Detection[0m
  [38;2;0;212;255mâ–¸[0m macOS detection sets OSTYPE correctly... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Linux detection routes to systemd... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mmacOS Plist Generation[0m
  [38;2;0;212;255mâ–¸[0m Daemon plist has correct structure... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Dashboard plist has correct arguments... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Connect plist created only when team-config exists... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/fresh-home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/fresh-home/Library/LaunchAgents/com.shipwright.dashboard.plist
â–¸ Skipping connect plist â€” /tmp/sw-launchd-test.f5Z1jF/fresh-home/.shipwright/team-config.json not found
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/fresh-home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/fresh-home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/fresh-home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/fresh-home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/fresh-home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/fresh-home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/fresh-home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/fresh-home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/fresh-home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/fresh-home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Plist files have correct permissions... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
[38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mInstall Command[0m
  [38;2;0;212;255mâ–¸[0m Install creates LaunchAgents directory... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Install calls launchctl load... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
scripts/sw-launchd-test.sh: line 469: [[: 0
0: syntax error in expression (error token is "0")
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Install fails gracefully if sw binary not found... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mUninstall Command[0m
  [38;2;0;212;255mâ–¸[0m Uninstall removes plist files... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
â–¸ Uninstalling launchd agents...
Mock unloaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Unloaded daemon service
âœ“ Removed daemon plist
Mock unloaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Unloaded dashboard service
âœ“ Removed dashboard plist
Mock unloaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Unloaded connect service
âœ“ Removed connect plist

âœ“ Uninstalled all launchd agents
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Uninstall calls launchctl unload... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
â–¸ Uninstalling launchd agents...
Mock unloaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Unloaded daemon service
âœ“ Removed daemon plist
Mock unloaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Unloaded dashboard service
âœ“ Removed dashboard plist
Mock unloaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Unloaded connect service
âœ“ Removed connect plist

âœ“ Uninstalled all launchd agents
scripts/sw-launchd-test.sh: line 561: [[: 0
0: syntax error in expression (error token is "0")
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Uninstall on empty system doesn't error... â–¸ Uninstalling launchd agents...

âœ“ Uninstalled all launchd agents
[38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mStatus Command[0m
  [38;2;0;212;255mâ–¸[0m Status command checks launchctl list... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Status shows log directory... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mHelp Command[0m
  [38;2;0;212;255mâ–¸[0m Help command shows usage and examples... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Help is shown for unknown commands... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mEnvironment & Configuration[0m
  [38;2;0;212;255mâ–¸[0m Plist contains correct environment variables... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Working directory is set in plist... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Plist configures stdout and stderr logging... â–¸ Installing launchd agents...
âœ“ Created daemon plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âš  server.ts not found at /tmp/sw-launchd-test.f5Z1jF/dashboard/server.ts â€” dashboard plist will reference a missing file
âœ“ Created dashboard plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Created connect plist: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
â–¸ Loading launchd services...
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.daemon.plist
âœ“ Loaded daemon service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.dashboard.plist
âœ“ Loaded dashboard service
Mock loaded: /tmp/sw-launchd-test.f5Z1jF/home/Library/LaunchAgents/com.shipwright.connect.plist
âœ“ Loaded connect service

â–¸ Services will auto-start on next login
â–¸ View logs: tail -f /tmp/sw-launchd-test.f5Z1jF/home/.shipwright/logs/*.log
â–¸ Uninstall: shipwright launchd uninstall
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Version variable is defined... [38;2;74;222;128mâœ“[0m

[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[38;2;74;222;128m[1m  All 20 tests passed âœ“[0m
[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


[38;2;0;212;255m[1m  Shipwright Linear Test Suite[0m
[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

[1m  Script Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present
  [38;2;74;222;128mâœ“[0m VERSION variable defined
  [38;2;74;222;128mâœ“[0m VERSION is semver: 3.1.0

[1m  Help Output[0m
  [38;2;74;222;128mâœ“[0m help mentions USAGE
  [38;2;74;222;128mâœ“[0m help mentions sync command
  [38;2;74;222;128mâœ“[0m help mentions update command
  [38;2;74;222;128mâœ“[0m help mentions status command
  [38;2;74;222;128mâœ“[0m help mentions init command
  [38;2;74;222;128mâœ“[0m help mentions LINEAR_API_KEY
  [38;2;74;222;128mâœ“[0m --help works

[1m  Error Handling[0m

shipwright linear â€” Linear â†” GitHub Bidirectional Sync

USAGE
  shipwright linear <command> [options]

COMMANDS
  sync [--dry-run]              Sync Linear Todo issues â†’ GitHub
  update <issue> <status>       Update linked Linear ticket status
  status                        Show sync dashboard
  init                          Configure Linear API key
  help                          Show this help

STATUS VALUES
  started     Pipeline spawned   â†’ Linear: In Progress
  review      PR created         â†’ Linear: In Review
  done        Pipeline complete   â†’ Linear: Done
  failed      Pipeline failed     â†’ Linear: adds failure comment

EXAMPLES
  shipwright linear init                    # Set up API key
  shipwright linear sync                    # Sync Todo â†’ GitHub
  shipwright linear sync --dry-run          # Preview what would sync
  shipwright linear update 42 started       # Mark as In Progress
  shipwright linear update 42 review        # Mark as In Review
  shipwright linear update 42 done          # Mark as Done
  shipwright linear status                  # Show dashboard

ENVIRONMENT
  LINEAR_API_KEY      API key (or use 'linear init' to save)
  LINEAR_TEAM_ID      Override team ID
  LINEAR_PROJECT_ID   Override project ID
  [38;2;74;222;128mâœ“[0m unknown command exits non-zero
  [38;2;74;222;128mâœ“[0m unknown command shows error

[1m  Default Behavior[0m
  [38;2;74;222;128mâœ“[0m no-arg defaults to help

[1m  Configuration[0m
  [38;2;74;222;128mâœ“[0m sync without API key shows error
  [38;2;74;222;128mâœ“[0m update without API key shows error
  [38;2;74;222;128mâœ“[0m status without API key shows error

[1m  Config Loading[0m
  [38;2;74;222;128mâœ“[0m sync with config proceeds

[1m  Update Subcommand[0m
  [38;2;74;222;128mâœ“[0m update without args shows usage

[1m  Notify Integration[0m
  [38;2;74;222;128mâœ“[0m notify subcommand executes without crash

[1m  Atomic Writes[0m
  [38;2;74;222;128mâœ“[0m init uses atomic write (tmp + mv)
  [38;2;74;222;128mâœ“[0m config file gets restricted permissions

[1m  GraphQL Helper[0m
  [38;2;74;222;128mâœ“[0m linear_graphql helper defined
  [38;2;74;222;128mâœ“[0m uses jq --arg for safe JSON escaping

[1m  Event Emission[0m
  [38;2;74;222;128mâœ“[0m emits linear events
  [38;2;74;222;128mâœ“[0m uses EVENTS_FILE for event logging


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 26 tests passed[0m


[38;2;0;212;255m[1m  shipwright logs test[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1mScript Safety[0m
  [38;2;74;222;128mâœ“[0m set -euo pipefail present
  [38;2;74;222;128mâœ“[0m ERR trap present

[1mVersion[0m
  [38;2;74;222;128mâœ“[0m VERSION variable defined

[1mHelp Output[0m
  [38;2;74;222;128mâœ“[0m help contains USAGE
  [38;2;74;222;128mâœ“[0m help contains --pane option
  [38;2;74;222;128mâœ“[0m help contains --follow option
  [38;2;74;222;128mâœ“[0m help contains --grep option
  [38;2;74;222;128mâœ“[0m help contains --capture option
  [38;2;74;222;128mâœ“[0m help contains -f shorthand

[1mHelp Exit Code[0m
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m -h exits 0

[1mError Handling[0m
  [38;2;74;222;128mâœ“[0m unknown option exits non-zero
  [38;2;74;222;128mâœ“[0m unknown option error

[1mList Logs[0m
  [38;2;74;222;128mâœ“[0m list shows Agent Logs heading
  [38;2;74;222;128mâœ“[0m list shows team directory

[1mTeam Logs[0m
  [38;2;74;222;128mâœ“[0m team logs shows team name
  [38;2;74;222;128mâœ“[0m team logs lists log files
  [38;2;74;222;128mâœ“[0m team logs shows builder log

[1mGrep Search[0m
  [38;2;74;222;128mâœ“[0m grep finds ERROR pattern
  [38;2;74;222;128mâœ“[0m grep shows file context
  [38;2;74;222;128mâœ“[0m grep shows no matches warning

[1mPane Filter[0m
  [38;2;74;222;128mâœ“[0m pane filter shows reviewer logs
  [38;2;74;222;128mâœ“[0m nonexistent pane warns

[1mCapture Command[0m
  [38;2;74;222;128mâœ“[0m capture reports status

[1mMissing Arguments[0m
  [38;2;74;222;128mâœ“[0m missing --pane value exits non-zero
  [38;2;74;222;128mâœ“[0m missing --pane shows error
  [38;2;74;222;128mâœ“[0m missing --grep value exits non-zero
  [38;2;74;222;128mâœ“[0m missing --grep shows error

[1mIntelligence Integration[0m
  [38;2;74;222;128mâœ“[0m intelligence_available function defined
  [38;2;74;222;128mâœ“[0m semantic_rank_results function defined

[1mScript Structure[0m
  [38;2;74;222;128mâœ“[0m LOGS_DIR defined
  [38;2;74;222;128mâœ“[0m capture_logs function defined
  [38;2;74;222;128mâœ“[0m list_logs function defined
  [38;2;74;222;128mâœ“[0m show_team_logs function defined


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 34 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Loop Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2m  help / version[0m
  [38;2;74;222;128mâœ“[0m --help exits 0
  [38;2;74;222;128mâœ“[0m --help shows usage
  [38;2;74;222;128mâœ“[0m --help shows options
  [38;2;74;222;128mâœ“[0m --help mentions --max-iterations
  [38;2;74;222;128mâœ“[0m --help mentions --test-cmd
  [38;2;74;222;128mâœ“[0m --help mentions --model
  [38;2;74;222;128mâœ“[0m --help mentions --agents
  [38;2;74;222;128mâœ“[0m --help mentions --resume
  [38;2;74;222;128mâœ“[0m VERSION variable defined in sw-loop.sh

[2m  argument parsing[0m
  [38;2;74;222;128mâœ“[0m No arguments exits non-zero

[2m  script safety[0m
  [38;2;74;222;128mâœ“[0m Uses set -euo pipefail
  [38;2;74;222;128mâœ“[0m ERR trap is set
  [38;2;74;222;128mâœ“[0m SIGHUP trap set for daemon resilience
  [38;2;74;222;128mâœ“[0m CLAUDECODE env var is unset

[2m  defaults[0m
  [38;2;74;222;128mâœ“[0m Default MAX_ITERATIONS is 20
  [38;2;74;222;128mâœ“[0m Default AGENTS is 1
  [38;2;74;222;128mâœ“[0m Default MAX_RESTARTS is 0
  [38;2;74;222;128mâœ“[0m Sources lib/compat.sh

[2m  json output format[0m
  [38;2;74;222;128mâœ“[0m build_claude_flags includes --output-format json
  [38;2;74;222;128mâœ“[0m accumulate_loop_tokens parses JSON usage
  [38;2;74;222;128mâœ“[0m LOOP_COST_MILLICENTS initialized
  [38;2;74;222;128mâœ“[0m write_loop_tokens includes cost_usd
  [38;2;74;222;128mâœ“[0m _extract_text_from_json helper defined
  [38;2;74;222;128mâœ“[0m validate_claude_output helper defined
  [38;2;74;222;128mâœ“[0m check_budget_gate helper defined
  [38;2;74;222;128mâœ“[0m run_claude_iteration separates stdout from stderr

[2m  json extraction robustness[0m
  [38;2;74;222;128mâœ“[0m _extract_text_from_json handles empty file
  [38;2;74;222;128mâœ“[0m _extract_text_from_json extracts .result from JSON
  [38;2;74;222;128mâœ“[0m _extract_text_from_json passes through plain text

[2m  default config from source[0m
  [38;2;74;222;128mâœ“[0m Default MAX_ITERATIONS is 20 (from source)
  [38;2;74;222;128mâœ“[0m Default AGENTS is 1 (from source)
  [38;2;74;222;128mâœ“[0m Default MAX_RESTARTS is 0 (from source)

[2m  json extraction edge cases[0m
  [38;2;74;222;128mâœ“[0m _extract_text_from_json handles nested JSON objects
  [38;2;74;222;128mâœ“[0m _extract_text_from_json handles binary garbage without crash

[2m  script structure[0m
  [38;2;74;222;128mâœ“[0m Script has circuit breaker logic
  [38;2;74;222;128mâœ“[0m Script has stuckness detection
  [38;2;74;222;128mâœ“[0m Script has test/quality gate functions
  [38;2;74;222;128mâœ“[0m Help text defines --model and --agents flags
  [38;2;74;222;128mâœ“[0m Help text defines --test-cmd and --resume flags

[2m  loop behavior: LOOP_COMPLETE[0m
  [38;2;74;222;128mâœ“[0m Loop detected completion signal

[2m  loop behavior: iterations on test failure[0m
  [38;2;74;222;128mâœ“[0m Loop runs multiple iterations when tests fail initially

[2m  loop behavior: max iterations[0m
  [38;2;74;222;128mâœ“[0m Loop stops at max iterations

[2m  loop behavior: stuckness detection[0m
  [38;2;74;222;128mâœ“[0m Loop detects stuckness

[2m  loop behavior: budget gate[0m
  [38;2;74;222;128mâœ“[0m Budget gate stops loop

[2m  validate_claude_output[0m
  [38;2;74;222;128mâœ“[0m validate_claude_output catches corrupt output

[2m  loop behavior: progress tracking[0m
  [38;2;74;222;128mâœ“[0m Loop tracks progress via git

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 46 tests passed[0m


[38;2;124;58;237m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;124;58;237m[1mâ•‘  shipwright memory+cost test â€” Unit Tests for Memory & Cost      â•‘[0m
[38;2;124;58;237m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up mock environment...[0m
[38;2;74;222;128mâœ“[0m Environment ready: [2m/tmp/sw-memory-test.osmxjU[0m

  [38;2;0;212;255mâ–¸[0m Memory capture from pipeline state... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Memory inject returns context for each stage... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Failure capture stores patterns... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Pattern detection identifies project type... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Cross-repo vs per-repo isolation... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Memory show displays dashboard... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Memory search finds matching entries... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Memory export produces valid JSON... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Memory forget clears repo memory... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Cost calculation for each model... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Cost recording writes to costs.json... WARN: Unknown event type 'cost.record' â€” update config/event-schema.json
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Budget set and check... WARN: Unknown event type 'cost.budget_set' â€” update config/event-schema.json
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Cost dashboard runs without errors... WARN: Unknown event type 'cost.record' â€” update config/event-schema.json
WARN: Unknown event type 'cost.record' â€” update config/event-schema.json
WARN: Unknown event type 'cost.record' â€” update config/event-schema.json
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Cost JSON output is valid... WARN: Unknown event type 'cost.record' â€” update config/event-schema.json
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Actionable failures threshold filtering... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Actionable failures with no file returns []... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m DORA baseline calculation from events... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Error log entries captured into failures.json... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fix outcome tracking increments counters... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Closed-loop inject returns formatted fix... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Global aggregation promotes frequent patterns... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Finalize pipeline runs capture + aggregate... â–¸ Capturing pipeline learnings for test-org/test-repo...
âœ“ Captured pipeline learnings (status: complete)
[38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mâ”â”â” Results â”â”â”[0m
  [38;2;74;222;128mPassed:[0m 22
  [38;2;248;113;113mFailed:[0m 0
  [2mTotal:[0m  22

[38;2;74;222;128m[1mAll 22 tests passed![0m


[38;2;0;212;255m[1m  Shipwright Mission Control Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Help & Navigation[0m
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows commands
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m unknown command shows error
[1m  Overview[0m
  [38;2;74;222;128mâœ“[0m overview shows MISSION CONTROL header
  [38;2;74;222;128mâœ“[0m overview shows Summary Statistics
  [38;2;74;222;128mâœ“[0m overview shows Active Pipelines
  [38;2;74;222;128mâœ“[0m overview with active job shows count
[1m  Agent Tree[0m
  [38;2;74;222;128mâœ“[0m agents shows hierarchy
  [38;2;74;222;128mâœ“[0m agents shows Pipeline Agent
[1m  Resources[0m
  [38;2;74;222;128mâœ“[0m resources shows utilization
[1m  Alerts[0m
  [38;2;74;222;128mâœ“[0m alerts shows alert feed
[1m  Stage Commands[0m
  [38;2;74;222;128mâœ“[0m pause without id exits nonzero
  [38;2;74;222;128mâœ“[0m pause emits success
  [38;2;74;222;128mâœ“[0m resume without id exits nonzero
  [38;2;74;222;128mâœ“[0m resume emits success
  [38;2;74;222;128mâœ“[0m skip without stage shows usage
  [38;2;74;222;128mâœ“[0m skip emits success
  [38;2;74;222;128mâœ“[0m retry emits success

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 19 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Model Router Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Help & Version[0m
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows route
  [38;2;74;222;128mâœ“[0m help shows escalate
  [38;2;74;222;128mâœ“[0m help shows config

[1m  Route Model[0m
  [38;2;74;222;128mâœ“[0m route intake at 50 = haiku
  [38;2;74;222;128mâœ“[0m route build at 50 = opus
  [38;2;74;222;128mâœ“[0m route test at 50 = sonnet
  [38;2;74;222;128mâœ“[0m route build at 10 (low) = sonnet
  [38;2;74;222;128mâœ“[0m route intake at 90 (high) = opus
  [38;2;74;222;128mâœ“[0m route unknown stage at 50 = sonnet

[1m  Escalate Model[0m
  [38;2;74;222;128mâœ“[0m escalate haiku -> sonnet
  [38;2;74;222;128mâœ“[0m escalate sonnet -> opus
  [38;2;74;222;128mâœ“[0m escalate opus -> opus (ceiling)
  [38;2;74;222;128mâœ“[0m escalate unknown exits non-zero

[1m  Config[0m
  [38;2;74;222;128mâœ“[0m config show displays JSON
  [38;2;74;222;128mâœ“[0m config creates default file
  [38;2;74;222;128mâœ“[0m config set confirms update
  [38;2;74;222;128mâœ“[0m config set persists value

[1m  Estimate[0m
  [38;2;74;222;128mâœ“[0m estimate shows stages
  [38;2;74;222;128mâœ“[0m estimate shows total

[1m  Report[0m
  [38;2;74;222;128mâœ“[0m report with no data warns

[1m  Record Usage[0m
  âœ“ record_usage creates usage file
  âœ“ record_usage writes entries
  âœ“ report with data shows summary
  âœ“ report shows total runs
  âœ“ report shows cost
  âœ“ report shows model counts

  Route All Stages & Complexity
  âœ“ route intake at 50 returns model
  âœ“ route plan at 50 returns model
  âœ“ route design at 50 returns model
  âœ“ route build at 50 returns model
  âœ“ route test at 50 returns model
  âœ“ route review at 50 returns model
  âœ“ route compound_quality at 50 returns model
  âœ“ route validate at 50 returns model
  âœ“ route monitor at 50 returns model
  âœ“ route plan at low complexity = sonnet
  âœ“ route plan at high complexity = opus

  Config Set/Show Cycle
âœ“ Updated cost_aware_mode = false
  âœ“ config show reflects settings
  âœ“ config set persists
  âœ“ estimate with low complexity shows stages
  âœ“ estimate shows Total
  âœ“ estimate with high complexity

  Error Handling
  âœ“ unknown subcommand exits non-zero
  âœ“ unknown subcommand shows error

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  All 45 tests passed


[38;2;0;212;255m[1m  Shipwright OTel Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1m  Help & Version[0m
  [38;2;74;222;128mâœ“[0m help shows usage
  [38;2;74;222;128mâœ“[0m help shows metrics
  [38;2;74;222;128mâœ“[0m help shows trace
  [38;2;74;222;128mâœ“[0m help shows export
  [38;2;74;222;128mâœ“[0m help shows webhook
  [38;2;74;222;128mâœ“[0m help shows dashboard

[1m  Metrics[0m
  [38;2;74;222;128mâœ“[0m metrics text has pipelines_total
  [38;2;74;222;128mâœ“[0m metrics text has active_pipelines
  [38;2;74;222;128mâœ“[0m metrics text has cost
  [38;2;74;222;128mâœ“[0m metrics text has queue depth
  [38;2;74;222;128mâœ“[0m metrics json has metrics key
  [38;2;74;222;128mâœ“[0m metrics json has pipelines_total
  [38;2;74;222;128mâœ“[0m metrics json is valid JSON

[1m  Trace[0m
  [38;2;74;222;128mâœ“[0m trace has resourceSpans
  [38;2;74;222;128mâœ“[0m trace has service.name
  [38;2;74;222;128mâœ“[0m trace output is valid JSON

[1m  Dashboard[0m
  [38;2;74;222;128mâœ“[0m dashboard has dashboard key
  [38;2;74;222;128mâœ“[0m dashboard output is valid JSON

[1m  Report[0m
  [38;2;74;222;128mâœ“[0m report shows header
  [38;2;74;222;128mâœ“[0m report shows events section
  [38;2;74;222;128mâœ“[0m report shows pipeline metrics
  [38;2;74;222;128mâœ“[0m report shows recommendations

[1m  Webhook[0m
  [38;2;74;222;128mâœ“[0m webhook without URL exits non-zero
  [38;2;74;222;128mâœ“[0m webhook without URL shows error

[1m  Metrics With Events[0m
  [38;2;74;222;128mâœ“[0m metrics count total pipelines = 2

[1m  Error Handling[0m
  [38;2;74;222;128mâœ“[0m unknown command exits non-zero
  [38;2;74;222;128mâœ“[0m unknown command shows error

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 27 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Oversight Tests[0m
[2m  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

  [38;2;74;222;128mâœ“[0m help shows usage text
  [38;2;74;222;128mâœ“[0m help exits 0
  [38;2;74;222;128mâœ“[0m --help flag works
  [38;2;74;222;128mâœ“[0m unknown command exits 1
  [38;2;74;222;128mâœ“[0m members shows board
  [38;2;74;222;128mâœ“[0m members.json created
  [38;2;74;222;128mâœ“[0m members.json is valid JSON
  [38;2;74;222;128mâœ“[0m config show works
  [38;2;74;222;128mâœ“[0m config.json created
  [38;2;74;222;128mâœ“[0m stats shows statistics
  [38;2;74;222;128mâœ“[0m history handles empty
  [38;2;74;222;128mâœ“[0m review without args exits nonzero
  [38;2;74;222;128mâœ“[0m review submission accepted
  [38;2;74;222;128mâœ“[0m review JSON file created
  [38;2;74;222;128mâœ“[0m review file is valid JSON
  [38;2;74;222;128mâœ“[0m stats shows total reviews >= 1

[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 16 tests passed[0m


[38;2;0;212;255m[1m  Shipwright Patrol Meta Test Suite[0m
[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

[1m  Script Structure[0m
  [38;2;74;222;128mâœ“[0m contains sourced-file note
  [38;2;74;222;128mâœ“[0m does NOT have set -euo pipefail as code (sourced script)
  [38;2;74;222;128mâœ“[0m no main() function (sourced script)

[1m  Function Definitions[0m
  [38;2;74;222;128mâœ“[0m patrol_meta_run() defined
  [38;2;74;222;128mâœ“[0m patrol_meta_create_issue() defined
  [38;2;74;222;128mâœ“[0m patrol_meta_untested_scripts() defined
  [38;2;74;222;128mâœ“[0m patrol_meta_bash_compat() defined
  [38;2;74;222;128mâœ“[0m patrol_meta_version_sync() defined
  [38;2;74;222;128mâœ“[0m patrol_meta_dora_trends() defined
  [38;2;74;222;128mâœ“[0m patrol_meta_template_effectiveness() defined
  [38;2;74;222;128mâœ“[0m patrol_meta_memory_pruning() defined
  [38;2;74;222;128mâœ“[0m patrol_meta_event_analysis() defined

[1m  Sourcing[0m
  [38;2;74;222;128mâœ“[0m script can be sourced without error

[1m  NO_GITHUB Dry Run[0m
  [38;2;74;222;128mâœ“[0m checks NO_GITHUB for dry-run mode
  [38;2;74;222;128mâœ“[0m supports dry-run output

[1m  Bash Compat Checks[0m
  [38;2;74;222;128mâœ“[0m bash compat check looks for declare -A
  [38;2;74;222;128mâœ“[0m bash compat check looks for readarray/mapfile

[1m  Dedup Logic[0m
  [38;2;74;222;128mâœ“[0m dedup logic skips duplicate issues
  [38;2;74;222;128mâœ“[0m dedup searches existing issues

[1m  Memory Pruning Check[0m
  [38;2;74;222;128mâœ“[0m memory pruning uses du -sk for size check
  [38;2;74;222;128mâœ“[0m memory pruning has MB threshold

[1m  Event Analysis[0m
  [38;2;74;222;128mâœ“[0m event analysis uses 7-day window
  [38;2;74;222;128mâœ“[0m event analysis checks pipeline.completed events


[2m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

  [38;2;74;222;128m[1mAll 23 tests passed[0m


[38;2;0;212;255m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;0;212;255m[1mâ•‘  shipwright pipeline composer â€” Test Suite        â•‘[0m
[38;2;0;212;255m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up test environment...[0m

[38;2;124;58;237m[1mPipeline Composition[0m
  [38;2;0;212;255mâ–¸[0m Composed pipeline has valid stage ordering... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m High-risk issue gets security stages... .claude/pipeline-artifacts/composed-pipeline.json
[38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Fallback to static template when no intelligence... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mConditional Stage Insertion[0m
  [38;2;0;212;255mâ–¸[0m Stage inserted at correct position after build... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Insert into nonexistent stage fails... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mModel Downgrade[0m
  [38;2;0;212;255mâ–¸[0m Budget constraint triggers model downgrades... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Downgrade with nonexistent stage fails... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mPipeline Validation[0m
  [38;2;0;212;255mâ–¸[0m Validation accepts valid pipeline... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Validation rejects invalid ordering (test before build)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Validation rejects missing stage ids... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Validation rejects missing stages array... [38;2;74;222;128mâœ“[0m

[38;2;124;58;237m[1mIteration Estimation[0m
  [38;2;0;212;255mâ–¸[0m Iteration estimates are reasonable (1-50 range)... [38;2;74;222;128mâœ“[0m

[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[38;2;74;222;128m[1m  All 12 tests passed âœ“[0m
[38;2;0;212;255m[1mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


[38;2;124;58;237m[1mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[38;2;124;58;237m[1mâ•‘  shipwright pipeline test â€” E2E Validation (Real Subprocess)     â•‘[0m
[38;2;124;58;237m[1mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[2mSetting up mock environment...[0m
[38;2;74;222;128mâœ“[0m Environment ready: [2m/tmp/sw-pipeline-test.2EuQM6[0m

  [38;2;0;212;255mâ–¸[0m Preflight passes with all mocks... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Preflight fails when sw-loop.sh missing... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Start requires --goal or --issue... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intake with --goal creates branch + artifacts... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Intake with --issue fetches from GitHub... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Plan generates plan.md, dod.md, tasks... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Build invokes sw loop and commits... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Test stage captures results to log... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Review generates report with severities... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m PR stage creates PR URL artifact... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Full E2E pipeline (6 stages)... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Resume continues from partial state... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Abort marks pipeline as aborted... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Dry run shows config, no artifacts... [38;2;74;222;128mâœ“[0m
  [38;2;0;212;255mâ–¸[0m Self-healing buildâ†’test retry loop... 